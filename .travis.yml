# Directs the Travis CI build service for the World Wind Website
# For more information see https://docs.travis-ci.com/user/customizing-the-build/

# The website uses nodejs to build
language: node_js

# Ensure a nodejs version supporting ES6 is used
node_js: "7"

# Blacklist the master branch to prevent builds kicked off by travis pushes
branches:
  except:
    - master

# Build the website - queries Bintray and OJO APIs for latest version information
script: npm run build

# Deploy the website - Travis does not invoke this step for pull request builds
deploy:
  provider: pages # Deploy the current directory to the master branch of the repo
  skip_cleanup: true
  github_token: $GITHUB_TOKEN
  target_branch: master
  on:
    branch: develop

# Notify the World Wind services mailing list on every build
notifications:
  email:
    recipients:
      secure: brzhPKbNHXWe0KToP9Pdd6wcM5y/REvBrNtcc8ic0skRMpyAXXfhV2f5GbA7P72nruQkovBAjPTdPXIGFCBzF0bDmmZUhXtCYCMv3RsJUVTpJfo8lfINgqHX5hxHspS2HtzFWVuxC4AXOf/TX0+J61fBOz96NMzZgv13t0D0XMqEFb4xaQaRIB8ucvYWzaqOimDwJgjmoDodOe7+UnBdmw8bhon/8ATxooVAx7bdKq15WAcd0k24lfdprbB8lskoN/Fbetm53khaa3fJw2A+EOtNMhM2Q7C15b0WpdIPOnCDCY9ZhcdvUR7Z/1nqay0jrR3vrHzeJL4uFhoru4YENEHSelsAiNgyZhuaYM79Kyq19nHVAYL4H18XEJYpNlFLIh38c3Uz3DHIkBBiwXITPNpeblWV+RhcW1G5SNhzmRU9jd96IwSQKpjJcqgGd3Vxj5y1yTmX3kYFKujenkRtZWFXoFP9Hnklt0LkykT2LOL/pY5TsC++XljeHg0R+Z6DB/O0Rk8NcAqLJnSr+kzuYItCym/ZgPnTdK6Hh5abmtm7fqitK5KgNK6AMN4BvTIgNkGoCH0K3L84lkgB/FfOMrcbljEcKvsBzXzc3tPaKYO3kAuGoLO7qnBW8qFJj6J9Eg4hyT8mioqWCMvxqnLDYlhg+ssnHfBuyUs6ehoYx1M=
    on_success: always
    on_failure: always
