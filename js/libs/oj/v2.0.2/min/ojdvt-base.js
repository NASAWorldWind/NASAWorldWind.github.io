/**
 * Copyright (c) 2014, 2016, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
"use strict";
define(["ojs/ojcore","jquery","ojs/ojcomponentcore","ojs/ojvalidation","ojs/internal-deps/dvt/DvtToolkit","ojdnd","promise"],function(a,f,b,d,c){function e(b,a){this.Zia=a;this.Tka=b;this.tca="/"}a.vh=function(b){this.Init(b)};o_("AttributeGroupHandler",a.vh,a);a.b.ga(a.vh,a.b,"oj.AttributeGroupHandler");a.vh.prototype.Init=function(b){this.dw={};this.JD=0;this.LK={};for(var a in b)this.YM(a,b[a])};a.vh.prototype.Pj=function(){return[]};a.b.g("AttributeGroupHandler.prototype.getValueRamp",{Pj:a.vh.prototype.Pj});
a.vh.prototype.Lc=function(b){if(this.LK[b])return this.LK[b];this.dw[b]||(this.Ii||(this.Ii=this.Pj().slice()),this.dw[b]=this.Ii[this.JD],this.JD++,this.JD==this.Ii.length&&(this.JD=0));return this.dw[b]};a.b.g("AttributeGroupHandler.prototype.getValue",{Lc:a.vh.prototype.Lc});a.vh.prototype.U2=function(){var b=[],a;for(a in this.dw)b.push({category:a,value:this.dw[a]});return b};a.b.g("AttributeGroupHandler.prototype.getCategoryAssignments",{U2:a.vh.prototype.U2});a.vh.prototype.YM=function(b,
a){this.LK[b]=a};a.b.g("AttributeGroupHandler.prototype.addMatchRule",{YM:a.vh.prototype.YM});a.xe=function(b){this.ew=[];if(f(document.body).hasClass("oj-hicontrast"))this.ew=a.xe.eR.slice();else{if(!a.xe.pw){a.xe.pw=[];var d=f(document.createElement("div"));d.attr("style","display:none;");d.attr("id","attrGps");f(document.body).append(d);for(var c=0;c<a.xe.sS.length;c++){var e=f(document.createElement("div"));e.addClass(a.xe.sS[c]);d.append(e);(e=e.css("color"))&&a.xe.pw.push(e)}d.remove()}this.ew=
0<a.xe.pw.length?a.xe.pw.slice():a.xe.eR.slice()}this.Init(b)};o_("ColorAttributeGroupHandler",a.xe,a);a.b.ga(a.xe,a.vh,"oj.ColorAttributeGroupHandler");a.xe.eR="#267db3 #68c182 #fad55c #ed6647 #8561c8 #6ddbdb #ffb54d #e371b2 #47bdef #a2bf39 #a75dba #f7f37b".split(" ");a.xe.sS="oj-dvt-category1 oj-dvt-category2 oj-dvt-category3 oj-dvt-category4 oj-dvt-category5 oj-dvt-category6 oj-dvt-category7 oj-dvt-category8 oj-dvt-category9 oj-dvt-category10 oj-dvt-category11 oj-dvt-category12".split(" ");a.xe.pw=
null;a.xe.prototype.Pj=function(){return this.ew};a.b.g("ColorAttributeGroupHandler.prototype.getValueRamp",{Pj:a.xe.prototype.Pj});e.prototype.Mka=function(b,a,d,c){for(var e={};b&&-1<a.indexOf(d);){var g=a.substring(0,a.indexOf(d));c&&void 0===b[g]&&(b[g]={});b=b[g];a=a.substring(a.indexOf(d)+1,a.length)}b&&(e.object=b,e.parameter=a);return e};e.prototype.R_=function(b){void 0===this.mx&&(b=this.Mka(this.Tka,this.Zia,this.tca,b),this.mx=b.object,this.XK=b.parameter)};e.prototype.Lc=function(){this.R_(!1);
return void 0===this.mx?void 0:this.mx[this.XK]};e.prototype.H5=function(b,a){this.R_(!0);if(a||!this.mx[this.XK])this.mx[this.XK]=b};var g={CSS_TEXT_PROPERTIES:function(b){var a={};b&&(b.hasClass("oj-gaugeMetricLabel")&&b.hasClass(b.parentNode,"oj-ledGauge")?(a["font-size"]=!0,a.color=!0):b.hasClass(b,"oj-chartSliceLabel")?a.color=!0:b.hasClass("oj-treemap-node-header")&&(a["font-weight"]=!0));return g.Caa(b,a)},CSS_BACKGROUND_PROPERTIES:function(b){return g.taa(b)},CSS_URL:function(b){return g.Yia(b)},
wR:"rgb(254, 0, 254)",v8:"Times",w8:"1px",yR:"1",xR:"normal",n8:4,mD:{},goa:function(b,a){return b.css(a)},Yia:function(b){return(b=b.css("background-image"))&&-1!==b.indexOf("url(")?b.slice(b.indexOf("url(")+4,b.length-1).replace(/"/g,""):b},taa:function(b){var a={};b.css("border-top-color")&&(a["border-color"]=b.css("border-top-color"));b.css("border-width")&&b.css("border-style")&&"none"!=b.css("border-style")&&(a["border-width"]=b.css("border-width"));b.css("background-color")&&(a["background-color"]=
b.css("background-color"));return a},Caa:function(b,a){var d={},c=b.css("font-family");c&&c!==g.v8&&(d["font-family"]=c.replace(/"/g,"'"));c=b.css("font-size");!c||-1<c.indexOf("px")&&parseFloat(c)<g.n8||a["font-size"]||(d["font-size"]=c);(c=b.css("font-weight"))&&c!==g.yR&&!a["font-weight"]&&(d["font-weight"]=c);(c=b.css("color"))&&c!==g.wR&&!a.color&&(d.color=c);(c=b.css("font-style"))&&c!==g.xR&&(d["font-style"]=c);return d},iqa:function(b,a,d,c){var e=f(document.createElement("div"));e.attr("style",
"display:none;");b.append(e);b="";for(var p=0;p<d.length;p++)b=b+d[p]+" ";e.attr("class",b);f(document.body).append(e);d=f(document.createElement("div"));d.css("font-size",g.w8);d.css("color",g.wR);d.css("font-weight",g.yR);d.css("font-style",g.xR);e.append(d);for(var r in c)b=c[r],b instanceof Array||(b=[b]),g.vja(d,a,r,b);e.remove()},vja:function(b,a,d,c){g.mD[d]||(g.mD[d]={});for(var n=null,p=0;p<c.length;p++){var r=c[p],s=r.property;if(s){var q=g.mD[d][s];"undefined"==typeof q&&(n||(n=f(document.createElement("div")),
n.addClass(d),b.append(n)),q=g.Nka(n,s),g.mD[d][s]=q);if(null!=q){var r=new e(a,r.path),t=g[s];if(null!=t){var v=r.Lc();if("CSS_URL"!==s){s="";if(null!=v){for(var x in q)-1===v.indexOf(x)&&(s+=x+":"+q[x]+";");s+=v}else for(x in q)s+=x+":"+q[x]+";";q=s}}r.H5(q,null!=t)}}}},Nka:function(b,a){var d=g[a],d=d?d(b):g.goa(b,a);return null==d||"string"==typeof d&&""==d.replace(/^\s+/g,"")?null:d}};a.ya("oj.dvtBaseComponent",f.oj.baseComponent,{_ComponentCreate:function(){this._super();this.yx=this.AL=0;this.Fk=
null;for(var b=this.Ge(),d=0;d<b.length;d++)this.element.addClass(b[d]);this.mL=f(document.createElement("div"));this.mL.attr("style","visibility:hidden;");this.element.append(this.mL);this.Ze=(b=this.element[0].parentElement)&&b.Bw?b.Bw:new c.Context(this.element[0],null,this.mL[0]);this.Ze.setReadingDirection(this.dc());this.Ze.setTooltipAttachedCallback(a.Components.gf);this.Ze.setOverlayAttachedCallback(a.Components.gf);this.Ze.setTooltipStyleClass("oj-dvt-tooltip");this.Ze.setDatatipStyleClass("oj-dvt-datatip");
f(document.body).hasClass("oj-hicontrast")&&c.Agent.setHighContrast(!0);this.ka=this.sf(this.Ze,this.hk,this);this.Ze.getStage().addChild(this.ka);!1!==c.requireJS&&(this.yla(),this.TZ());this.zs();this.options._environment="jet";this.options._widgetConstructor=a.Components.Tf(this.element)},rf:function(){this._super();this.element.attr("tabIndex",0);"off"!=this.options.trackResize&&this.ZG();this.NZ();this.yf()},refresh:function(){this._super();this.Ze.setReadingDirection(this.dc());this.TZ();this.yf()},
getNodeBySubId:function(b){var a=this.ka&&this.ka.getAutomation?this.ka.getAutomation():null;if(a)return b=this.hi(b),a.getDomElementForSubId(b)},getSubIdByNode:function(b){var a=this.ka&&this.ka.getAutomation?this.ka.getAutomation():null;if(a)return(b=a.getSubIdForDomElement(b))?this.jg(b):null},hi:function(){return null},jg:function(){return null},jA:function(){g.iqa(this.element,this.options,this.Ge(),this.ii())},Ge:function(){return["oj-dvtbase"]},ii:function(){return{"oj-dvt-no-data-message":{path:"_statusMessageStyle",
property:"CSS_TEXT_PROPERTIES"}}},ki:function(){return[]},li:function(){var b=this.options.translations,b={"DvtUtilBundle.CLEAR_SELECTION":b.labelClearSelection,"DvtUtilBundle.COLON_SEP_LIST":b.labelAndValue,"DvtUtilBundle.INVALID_DATA":b.labelInvalidData,"DvtUtilBundle.NO_DATA":b.labelNoData,"DvtUtilBundle.DATA_VISUALIZATION":b.labelDataVisualization,"DvtUtilBundle.STATE_SELECTED":b.stateSelected,"DvtUtilBundle.STATE_UNSELECTED":b.stateUnselected,"DvtUtilBundle.STATE_MAXIMIZED":b.stateMaximized,
"DvtUtilBundle.STATE_MINIMIZED":b.stateMinimized,"DvtUtilBundle.STATE_EXPANDED":b.stateExpanded,"DvtUtilBundle.STATE_COLLAPSED":b.stateCollapsed,"DvtUtilBundle.STATE_ISOLATED":b.stateIsolated,"DvtUtilBundle.STATE_HIDDEN":b.stateHidden,"DvtUtilBundle.STATE_VISIBLE":b.stateVisible,"DvtUtilBundle.SCALING_SUFFIX_THOUSAND":b.labelScalingSuffixThousand,"DvtUtilBundle.SCALING_SUFFIX_MILLION":b.labelScalingSuffixMillion,"DvtUtilBundle.SCALING_SUFFIX_BILLION":b.labelScalingSuffixBillion,"DvtUtilBundle.SCALING_SUFFIX_TRILLION":b.labelScalingSuffixTrillion,
"DvtUtilBundle.SCALING_SUFFIX_QUADRILLION":b.labelScalingSuffixQuadrillion},d=a.La.Iy("abbreviated");b["DvtUtilBundle.MONTH_SHORT_JANUARY"]=d[0];b["DvtUtilBundle.MONTH_SHORT_FEBRUARY"]=d[1];b["DvtUtilBundle.MONTH_SHORT_MARCH"]=d[2];b["DvtUtilBundle.MONTH_SHORT_APRIL"]=d[3];b["DvtUtilBundle.MONTH_SHORT_MAY"]=d[4];b["DvtUtilBundle.MONTH_SHORT_JUNE"]=d[5];b["DvtUtilBundle.MONTH_SHORT_JULY"]=d[6];b["DvtUtilBundle.MONTH_SHORT_AUGUST"]=d[7];b["DvtUtilBundle.MONTH_SHORT_SEPTEMBER"]=d[8];b["DvtUtilBundle.MONTH_SHORT_OCTOBER"]=
d[9];b["DvtUtilBundle.MONTH_SHORT_NOVEMBER"]=d[10];b["DvtUtilBundle.MONTH_SHORT_DECEMBER"]=d[11];return b},TZ:function(){var b=this.li();c.Bundle.addLocalizedStrings(b)},yla:function(){var b={};b.numberConverterFactory=a.qa.b3("number");b.dateToIsoConverter=function(b){return b instanceof Date?a.sb.dateToLocalIso(b):b};b.isoToDateConverter=function(b){return"string"==typeof b?a.sb.isoToLocalDate(b):b};this.Ze.setLocaleHelpers(b)},_destroy:function(){this.Ze.hideTooltips();this.Ze=null;var b=this.element[0].parentElement;
b&&b.Bw&&(b.Bw=null);this.ka.destroy&&this.ka.destroy();this.ka=null;this.wL();this.element.children().remove();this.element.removeAttr("role").removeAttr("tabIndex").removeAttr("aria-activedescendant");for(var b=this.Ge(),a=0;a<b.length;a++)this.element.removeClass(b[a]);this._super()},_setOptions:function(b,a){this._superApply(arguments);var d=this.options.trackResize;"off"==d&&this.Ei?this.wL():"off"==d||this.Ei||this.ZG();this.NZ();if(!this.yT){var c=!1,e=this.ki(),g=["highlightedCategories",
"selection","dataCursorPosition"];f.each(b,function(b){if(0>e.indexOf(b)&&0>g.indexOf(b))return c=!0,!1});c?this.yf():(void 0!==b.highlightedCategories&&this.ka.highlight(b.highlightedCategories),void 0!==b.selection&&this.ka.select(b.selection),void 0!==b.dataCursorPosition&&this.ka.positionDataCursor&&this.ka.positionDataCursor(b.dataCursorPosition))}},sf:function(){return null},hk:function(b){var a=b.type;"selection"===a?this.xd("selection",b.selection):"categoryHide"===a||"categoryShow"===a?this.xd("hiddenCategories",
b.hiddenCategories):"categoryHighlight"===a?this.xd("highlightedCategories",b.categories):"optionChange"===a?this.xd(b.key,b.value,b.optionMetadata):"touchHoldRelease"===a&&this.options.contextMenu?this.wf(f.Event(b.nativeEvent),"touch"):"ready"===a&&0===this.yx&&(this.iL&&this.iL(!0),this.WZ=!0,this.hL=this.iL=null)},ZG:function(){this.Ei||(this.Ei=this.af.bind(this),a.v.Ph(this.element[0],this.Ei,250))},wL:function(){this.Ei&&(a.v.Si(this.element[0],this.Ei),this.Ei=null)},af:function(){var b=this.element.width(),
a=this.element.height();(null==this.LD||null==this.jC||5<=Math.abs(b-this.LD)+Math.abs(a-this.jC))&&this.yf(!0)},zs:function(){},yf:function(b){this.XR();this.Ze.isReadyToRender()?(this.LD=this.Yz()?null:this.element.width(),this.jC=this.Yz()?null:this.element.height(),this.options._width=this.LD,this.options._height=this.jC,this.options._locale=a.ba.Bg(),this.options.dnd&&this.element.attr("draggable",!0),this.jA(),this.AL++,b?this.Fk||this.zL(null):0===this.Lka().length&&this.zL(this.options),this.CL=
!1):this.CL=!0},Al:function(){this._super();this.CL&&this.yf()},wn:function(){this._super();this.CL&&this.yf()},oi:function(){this._super();this.Ze.hideTooltips()},zl:function(){this._super();this.Ze.hideTooltips()},xd:function(b,a,d){this.yT=!0;this.option(b,a,{_context:{Hc:!0,Br:d,Wa:!0}});this.yT=!1},uf:function(b,a,d){"touch"!==d&&("keyboard"===d?this.wf(a,d,{position:{of:this.ka.getKeyboardFocus()}}):this._super(b,a,d))},Hv:function(b){return(b=a.Components.Tf(b)("instance"))?b.ka:null},Ug:function(b){if(b){var a=
{},d;for(d in b)this.C$(b,d,a);Object.defineProperties(b,a)}},C$:function(b,a,d){var c=("selected"==a?"is":"get")+a.charAt(0).toUpperCase()+a.slice(1);d[c]={value:function(){return b[a]}}},Fp:function(b){for(var a="",d=0;d<b.length;d++)a+="["+b[d]+"]";return a},xl:function(b){for(var a=[],d=0;0<b.indexOf("[",d);){var c=b.indexOf("[",d)+1,d=b.indexOf("]",d);a.push(Number(b.substring(c,d)));d+=1}return a},Vg:function(b){return Number(this.Sz(b))},Sz:function(b){var a=b.indexOf("[")+1,d=b.indexOf("]");
return b.substring(a,d)},ji:function(){return{}},Lka:function(){this.Fk=null;var b=this.ji(),a;for(a in b)for(var d=b[a],c=0;c<d.length;c++)if("root"===a){if(this.dq(this.options,d[c]))break}else{var e=this.options[a];if(e)for(var g=0;g<e.length&&!this.dq(e[g],d[c]);g++);}var f=[];this.yx=0;if(this.Fk){var s=this;for(a in b)d=b[a],d.forEach(function(b){var d;if("root"===a)(d=s.RW(s.Fk,b))&&f.push(d);else{var c=s.Fk[a];if(c)for(var e=0;e<c.length;e++)(d=s.RW(c[e],b))&&f.push(d)}})}return f},dq:function(b,
a){if(!this.Fk){var d=(new e(b,a)).Lc();d&&(d instanceof Function||d instanceof Promise)&&(this.Fk=c.JsonUtils.clone(this.options))}return null!==this.Fk},RW:function(b,a){var d=new e(b,a),c=d.Lc();c instanceof Function&&(c=Promise.resolve(c(this.sR(b))));if(c&&c instanceof Promise){this.yx++;var g=this.AL,f=this;c.then(function(b){f.F_(g,d,b)},function(){f.F_(g,d,[])});return c}return null},F_:function(b,a,d){b===this.AL&&(this.yx--,a.H5(d,!0),0===this.yx&&(this.zL(this.Fk),this.Fk=null))},zL:function(b){var a=
this.Yz()&&this.Ei;a&&this.wL();this.ka.render(b,this.LD,this.jC);a&&this.ZG()},sR:function(){return{}},Yz:function(){return!1},whenReady:function(){if(this.WZ)return Promise.resolve(!0);if(!this.hL){var b=this;this.hL=new Promise(function(a){b.iL=a})}return this.hL},XR:function(){this.WZ=!1},NZ:function(){var b=this.options.tooltip;"function"===typeof b&&(this.options.tooltip={renderer:b})}},!0);a.hs=function(b){this.Init(b)};o_("ShapeAttributeGroupHandler",a.hs,a);a.b.ga(a.hs,a.vh,"oj.ShapeAttributeGroupHandler");
a.hs.ew="square circle diamond plus triangleDown triangleUp human".split(" ");a.hs.prototype.Pj=function(){return a.hs.ew};a.b.g("ShapeAttributeGroupHandler.prototype.getValueRamp",{Pj:a.hs.prototype.Pj})});