/**
 * Copyright (c) 2014, 2016, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
"use strict";
define(["ojs/ojcore","jquery","ojs/ojcomponentcore","ojdnd"],function(a,f){function b(a,c,e,f,h,k){null==b.aH&&(b.aH=b.Ada());this.rc=a;this.Cj=c;this.kaa=e;f&&f.X5&&(this.vma=f.X5);h&&(h.a6&&(this.sM=h.a6),h.Z5&&(this.rM=h.Z5),h.e6&&(this.xM=h.e6),h.d6&&(this.wM=h.d6),h.b6&&(this.uM=h.b6),h.c6&&(this.yD=h.c6),h.g6&&(this.zM=h.g6),h.h6&&(this.AM=h.h6),h.f6&&(this.yM=h.f6));k&&(k.O1&&(this.Fn=k.O1),k.n5&&(this.jh=k.n5),k.C3&&(this.cX=k.C3),k.L3&&(this.FJ=k.L3),k.J5&&(this.xo=k.J5),k.X3&&(this.Ct=k.X3),
k.u4&&(this.Pt=k.u4),k.t4&&(this.Ek=k.t4),k.s4&&(this.mo=k.s4),k.L5&&(this.$x=k.L5),k.gf&&(this.a1=k.gf),k.Lg&&(this.b1=k.Lg));c=document.createElement("div");e=c.style;e.display="inline-block";e.overflow="hidden";e.visibility="hidden";f=document.createElement("div");e=f.style;e.display="inline-block";c.appendChild(f);a.insertBefore(c,a.firstChild);this.Q0=c;this.Uq=f;var l=this;this.Ak=function(a){l.zq(a)};this.UX=function(){l.Iga()};this.wq=function(a){l.UJ(a)};this.yq=function(a){l.aK(a)}}b.prototype.Wj=
function(a,b){var e=!1;a?(e=this.gh()?!0:!1,this.G_()):(this.Ek&&this.Ek(),this.BM(b),e=this.vM());return e};b.prototype.destroy=function(){for(var a=this.rc,b=this.uq(),e=0;e<b.length;e++){var f=b[e].style;this.Cj?f.right="":f.left="";f.top=""}a.removeChild(this.Q0);this.b1=this.a1=this.$x=this.mo=this.Ek=this.Pt=this.Ct=this.xo=this.FJ=this.cX=this.jh=this.Fn=this.rc=this.Gl=this.mk=this.ri=this.nk=this.jj=this.yq=this.wq=this.UX=this.Ak=this.Uq=this.Q0=null};b.prototype.resizeTile=function(a,b){var e=
this.rc.querySelector(a);if(e){this.nk||(this.nk=[]);var f=this.nk;f.push(e);f.push(b);this.N_=!0;this.Ix()}};b.prototype.Bpa=function(a,b){var e=this.uq();this.$x&&this.$x(e);var f=null;0<=b&&b<e.length&&(f=e[b]);this.rc.insertBefore(a,f);this.Ix()};b.prototype.Lqa=function(a){if(a=this.rc.querySelector(a))this.ri||(this.ri=[]),this.ri.push(a),this.cM=!0,this.xj!==b.mS&&this.xj!==b.iA?this.Ix():this.cM=!1};b.prototype.upa=function(a){if(a=this.rc.querySelector(a))this.mk||(this.mk=[]),this.mk.push(a),
this.VX=!0,this.Ix()};b.prototype.vqa=function(){this.N_||this.VX||this.cM||(this.Ek&&this.Ek(),this.BM(!1),this.vM())};b.prototype.Eg=function(){if(this.p1)return!1;this.Faa||(this.aaa=this.kaa?!1:b.Dha(b.aH[0],b.aH[1]),this.Faa=!0);return this.aaa};b.prototype.sE=function(){return null!=this.xj||null!=this.jj&&0<this.jj.length};b.prototype.gE=function(){this.p1=!0;this.hm(this.xM);this.hm(this.wM);this.hm(this.uM);this.hm(this.yD);this.hm(this.zM);this.hm(this.AM);this.hm(this.yM);this.jh(this.Uq,
this.sM);this.jh(this.Uq,this.rM);b.le(this.rc,"transitionend",this.Ak);b.le(this.rc,"webkitTransitionEnd",this.Ak);for(var a=this.uq(),c=0;c<a.length;c++){var e=a[c];e.FA&&delete e.FA;b.le(e,"transitionend",this.wq);b.le(e,"webkitTransitionEnd",this.wq);b.le(e,"transitionend",this.yq);b.le(e,"webkitTransitionEnd",this.yq)}this.Dt?(clearTimeout(this.Dt),this.Dt=null,this.UJ(null)):this.gu?(clearTimeout(this.gu),this.gu=null,this.bM()):this.xj===b.iA||null!=this.jj&&0<this.jj.length?this.zq(null):
this.xj===b.nS&&this.aK(null);this.p1=!1};b.bea=function(a){var c=b.Gw(a);return{Xf:a.offsetWidth+(b.og(c.marginLeft)+b.og(c.marginRight)),oh:a.offsetHeight+(b.og(c.marginTop)+b.og(c.marginBottom))}};b.aea=function(a){a=b.Gw(a);return{paddingLeft:b.og(a.paddingLeft),paddingRight:b.og(a.paddingRight),paddingTop:b.og(a.paddingTop),paddingBottom:b.og(a.paddingBottom),borderLeftWidth:b.og(a.borderLeftWidth),borderRightWidth:b.og(a.borderRightWidth),borderTopWidth:b.og(a.borderTopWidth),borderBottomWidth:b.og(a.borderBottomWidth)}};
b.Gw=function(a){var b=a.ownerDocument.defaultView,e=null;return e=b?b.getComputedStyle(a,null):a.currentStyle};b.og=function(a){return 0<a.length&&"auto"!=a?(a=parseInt(a,10),isNaN(a)&&(a=0),a):0};b.zf=function(a,b,e){a.addEventListener?a.addEventListener(b,e,!1):a.attachEvent&&a.attachEvent("on"+b,e)};b.le=function(a,b,e){a.removeEventListener?a.removeEventListener(b,e,!1):a.detachEvent&&a.detachEvent("on"+b,e)};b.tT=function(a,b){if(a)for(var e=0;e<a.length;e++)if(a[e]==b)return e;return-1};b.Dha=
function(a,b){var e=["gecko",16,"trident",6,"webkit",533.1],f=e.length;if(0==f%2)for(var h=0;h<=f-2;h+=2)if(a==e[h]){if(b>=e[1+h])return!0;break}return!1};b.Ada=function(){var a=b.Ci,c=null,e=-1,f=navigator.userAgent.toLowerCase();-1!=f.indexOf("msie")||-1!=f.indexOf("trident")?(c="trident",e=a(f,/trident\/(\d+[.]\d+)/),-1==e&&(e=a(f,/msie (\d+\.\d+);/),-1==e&&(e=a(f,/msie (\d+\.\d+)b;/)),e-=4),null!=document.documentMode&&(e=Math.min(e,document.documentMode-4))):-1!=f.indexOf("applewebkit")?(c="webkit",
e=a(f,/applewebkit\/(\d+([.]\d+)*)/)):-1!=f.indexOf("gecko/")&&(c="gecko",e=a(f,/rv:(\d+[.]\d+)/));return[c,e]};b.Ci=function(a,b){var e=a.match(b);return e&&(e=e[1])?parseFloat(e):-1};b.nba=function(a,b){return a.UE>b.UE?1:a.UE<b.UE?-1:a.TE>b.TE?1:a.TE<b.TE?-1:0};b.prototype.Ix=function(){this.nC||(this.xj?this.kL||(this.kL=!0):this.nC=setTimeout(this.UX,0))};b.prototype.uq=function(){for(var a=this.rc.querySelectorAll(this.vma),b=[],e=0;e<a.length;e++){var f=a[e],h=f.style;0<f.offsetWidth&&0<f.offsetHeight&&
"hidden"!=h.visibility&&b.push(f)}return b};b.prototype.vM=function(){var a=this.jj,c=this.gh();if(this.nk){var e=this.nk;c||(c=[]);for(var f=0;f<e.length;f+=2){var h=e[f];0>b.tT(c,h)&&c.push(h)}}e=!1;if(!c||1>c.length){if(!a||1>a.length)this.jj=null,this.zq(null),e=!0}else this.jj=c;a=null!=c&&0<c.length;this.Eg()||e||this.zq(null);return a};b.prototype.gh=function(){var a=this.rc,c=this.uq();this.$x&&this.$x(c);var e=this.FH=null;this.Ln=0;this.na=1;this.Vt=null;var f=[],h=[],k=[],l=this.Cj,m=b.aea(a),
n=0,p=[];this.sT=p;for(var r=0;r<c.length;r++){var s=c[r],q=this.FJ(s);(e=s.FA)&&delete s.FA;if(!this.FH){var t=q;e&&(t=document.createElement("div"),t.className=e,t=this.FJ(t));this.FH=this.Gaa(s,t)}e=this.FH;this.Vt||(this.Ln=Math.max(Math.floor((a.offsetWidth-m.paddingLeft-m.paddingRight-m.borderLeftWidth-m.borderRightWidth)/e.Xf),1),this.$ga(this.Ln,this.na),n=this.Ln);q.colSpan>n&&(n=q.colSpan);q.colSpan>this.Ln&&(q.colSpan=this.Ln);for(var v=!1,t=0;t<this.na;t++){for(var x=0;x<this.Ln;x++)if(this.uda(x,
t,q)){var v=s.style,u={top:v.top};l?u.right=v.right:u.left=v.left;h.push(u);this.bL(s,x,t,q,e,m);l&&k.push(x);v=!0;p.push({TE:x,UE:t,tile:s});break}if(v)break;t===this.na-1&&this.cT()}}e&&(a=this.Uq.style,a.width=n*e.Xf+"px",a.height=this.na*e.oh+"px");for(r=0;r<c.length;r++)s=c[r],v=s.style,u=h[r],""!=u.top&&(l&&parseInt(v.right,10)!==parseInt(u.right,10)||!l&&parseInt(v.left,10)!==parseInt(u.left,10)||parseInt(v.top,10)!==parseInt(u.top,10))&&f.push(s);1>f.length&&(f=null);return f};b.prototype.G_=
function(){var a=this.sT;this.sT=null;for(var a=a.sort(b.nba),c=this.uq(),e=0;e<c.length;e++){var f=c[e],h=a[e].tile;f!=h&&(this.b1(h),f.parentNode.insertBefore(h,f),this.a1(h),f=b.tT(c,h),f>e&&(c.splice(f,1),c.splice(e,0,h)))}};b.prototype.$ga=function(a,b){for(var e=this.Vt=[],f=0;f<b;f++){var h=[];e.push(h);for(var k=0;k<a;k++)h[k]=!1}};b.prototype.cT=function(){this.na++;var a=[];this.Vt.push(a);for(var b=0;b<this.Ln;b++)a[b]=!1};b.prototype.uda=function(a,b,e){var f=e.colSpan;e=e.rowSpan;for(var h=
b;h<b+e;h++){h>=this.na&&this.cT();for(var k=a;k<a+f;k++)if(k>=this.Ln||this.Vt[h][k])return!1}return!0};b.prototype.bL=function(a,b,e,f,h,k){var l=f.colSpan;f=f.rowSpan;for(var m=this.Vt,n=e;n<e+f;n++)for(var p=b;p<b+l;p++)m[n][p]=!0;a=a.style;a.top=k.paddingTop+e*h.oh+"px";this.Cj?a.right=k.paddingRight+b*h.Xf+"px":a.left=k.paddingLeft+b*h.Xf+"px"};b.prototype.N$=function(a){for(var b=this.uq(),e=0;e<b.length;e++)this.Fn(b[e],a)};b.prototype.hm=function(a){for(var b=this.uq(),e=0;e<b.length;e++)this.jh(b[e],
a)};b.prototype.BM=function(a){this.WY||(this.H_=a,this.Eg()&&(this.N$(a?this.wM:this.xM),this.Fn(this.Uq,a?this.rM:this.sM),b.zf(this.rc,"transitionend",this.Ak),b.zf(this.rc,"webkitTransitionEnd",this.Ak)),this.WY=!0)};b.prototype.zq=function(a){var c=!0;if(this.jj){var e=this.jj;if(a){var f=a.target;for(a=0;a<e.length;a++)if(f===e[a]){e.splice(a,1);break}}else this.Eg()||(e=this.jj=[]);0<e.length&&(c=!1)}if(c){if(this.nk&&(c=this.nk,this.nk=null,this.Eg()))for(a=0;a<c.length;a+=2)this.jh(c[a],
this.yM);this.H_?(this.Eg()&&(this.hm(this.wM),this.jh(this.Uq,this.rM)),this.H_=!1):this.Eg()&&(this.hm(this.xM),this.jh(this.Uq,this.sM));this.Eg()&&(b.le(this.rc,"transitionend",this.Ak),b.le(this.rc,"webkitTransitionEnd",this.Ak));this.cM=this.VX=this.N_=this.WY=!1;this.G_();this.Pt&&this.Pt();if(this.xj===b.iA)if(this.Eg()){var h=this;this.gu=setTimeout(function(){h.bM()},0)}else this.bM();else this.xj||this.mo&&this.mo()}};b.prototype.Gaa=function(a,c){var e=b.bea(a);return{Xf:e.Xf/c.colSpan,
oh:e.oh/c.rowSpan}};b.prototype.Iga=function(){this.nC&&(clearTimeout(this.nC),this.nC=null);this.Ek&&this.Ek();this.xj=b.mS;if(this.mk&&this.Eg()){for(var a=this.mk,c=0;c<a.length;c++){var e=a[c];b.zf(e,"transitionend",this.wq);b.zf(e,"webkitTransitionEnd",this.wq);this.Fn(e,this.uM)}var f=this;this.Dt=setTimeout(function(){for(var b=0;b<a.length;b++){var c=a[b];f.jh(c,f.uM);f.Fn(c,f.yD)}},0)}else this.UJ(null)};b.prototype.UJ=function(a){this.Dt&&(clearTimeout(this.Dt),this.Dt=null);if(a){a.preventDefault();
a.stopPropagation();a=a.target;this.jh(a,this.yD);b.le(a,"transitionend",this.wq);b.le(a,"webkitTransitionEnd",this.wq);var c=this.mk;if(c){for(var e=0;e<c.length;e++){var f=c[e];if(f===a){c.splice(e,1);this.Gl||(this.Gl=[]);var h=this.Gl;h.push(a);break}}1>c.length&&(this.mk=null)}}else if(!this.Eg()&&(c=this.mk)){for(e=0;e<c.length;e++)f=c[e],this.Gl||(this.Gl=[]),h=this.Gl,h.push(f);this.mk=null}if(!this.mk){if(this.Gl){h=this.Gl;for(e=0;e<h.length;e++)a=h[e],this.Eg()&&this.jh(a,this.yD),c=a.style,
this.Cj?c.right="":c.left="",c.top="",this.Ct&&this.Ct(a);this.Gl=null}this.xj=b.iA;this.BM(!1);if(this.nk)for(h=this.nk,e=0;e<h.length;e+=2)a=h[e],c=h[e+1],f=this.cX(a),this.jh(a,f),this.Fn(a,c),this.Eg()&&(this.Fn(a,this.yM),a.FA=f);this.vM()}};b.prototype.bM=function(){this.gu&&(clearTimeout(this.gu),this.gu=null);this.xj=b.nS;if(this.ri&&this.Eg())for(var a=this.ri,c=0;c<a.length;c++){var e=a[c];b.zf(e,"transitionend",this.yq);b.zf(e,"webkitTransitionEnd",this.yq);this.Fn(e,this.AM);this.jh(e,
this.zM)}else{if(this.ri)for(a=this.ri,c=0;c<a.length;c++)e=a[c],this.jh(e,this.zM);this.aK(null)}};b.prototype.aK=function(a){if(a){a.preventDefault();a.stopPropagation();a=a.target;this.jh(a,this.AM);b.le(a,"transitionend",this.yq);b.le(a,"webkitTransitionEnd",this.yq);var c=this.ri;if(c){for(var e=0;e<c.length;e++){var f=c[e];if(f===a){c.splice(e,1);this.xo&&this.xo(a);break}}1>c.length&&(this.ri=null)}}else if(!this.Eg()&&(c=this.ri)){for(e=0;e<c.length;e++)f=c[e],this.xo&&this.xo(f);this.ri=
null}this.ri||(this.xj=null,this.mo&&this.mo(),this.kL&&(this.kL=!1,this.Ix()))};b.mS=1;b.iA=2;b.nS=3;(function(){function d(a){for(;a;){a=a.nextSibling;var b=!0;if(a){var c=a.style;!c||c.visibility!==p&&c.display!==r||(b=!1)}if(a&&1===a.nodeType&&b)return a}return null}function c(a,b){for(var c=a;c;){var d=c.style;if(d&&(d.visibility===p||d.display===r))break;d=c.parentNode;if(d===b)return c;c=d}return null}function e(a,b){return b.sc<a.sc?1:a.sc<b.sc?-1:0}function g(a){a&&a.sort(e);return a}function h(a){var b=
null;a=f(a);a.hasClass("oj-masonrylayout-tile-1x1")?b={colSpan:1,rowSpan:1}:a.hasClass("oj-masonrylayout-tile-2x1")?b={colSpan:2,rowSpan:1}:a.hasClass("oj-masonrylayout-tile-3x1")?b={colSpan:3,rowSpan:1}:a.hasClass("oj-masonrylayout-tile-1x2")?b={colSpan:1,rowSpan:2}:a.hasClass("oj-masonrylayout-tile-1x3")?b={colSpan:1,rowSpan:3}:a.hasClass("oj-masonrylayout-tile-2x2")?b={colSpan:2,rowSpan:2}:a.hasClass("oj-masonrylayout-tile-2x3")?b={colSpan:2,rowSpan:3}:a.hasClass("oj-masonrylayout-tile-3x2")&&
(b={colSpan:3,rowSpan:2});return b}function k(a){var b=null;a=f(a);a.hasClass("oj-masonrylayout-tile-1x1")?b="oj-masonrylayout-tile-1x1":a.hasClass("oj-masonrylayout-tile-2x1")?b="oj-masonrylayout-tile-2x1":a.hasClass("oj-masonrylayout-tile-3x1")?b="oj-masonrylayout-tile-3x1":a.hasClass("oj-masonrylayout-tile-1x2")?b="oj-masonrylayout-tile-1x2":a.hasClass("oj-masonrylayout-tile-1x3")?b="oj-masonrylayout-tile-1x3":a.hasClass("oj-masonrylayout-tile-2x2")?b="oj-masonrylayout-tile-2x2":a.hasClass("oj-masonrylayout-tile-2x3")?
b="oj-masonrylayout-tile-2x3":a.hasClass("oj-masonrylayout-tile-3x2")&&(b="oj-masonrylayout-tile-3x2");return b}function l(a,b){f(a).removeClass(b)}function m(a,b){f(a).addClass(b)}a.ya("oj.ojMasonryLayout",f.oj.baseComponent,{defaultElement:"\x3cdiv\x3e",widgetEventPrefix:"oj",options:{reorderHandle:null,beforeInsert:null,insert:null,beforeRemove:null,remove:null,beforeResize:null,resize:null,beforeReorder:null,reorder:null},_ComponentCreate:function(){this._super();this.element.addClass("oj-masonrylayout oj-component");
this.options.disabled&&a.q.warn(u);this.Fr=this.eventNamespace+"ReorderHandle";this.pa={};this.pa.sh=!1;this.pa.Pe=!1;this.pa.AP=!1;this.pa.$m=!1;this.pa.np=!1;this.co();this.aw();this.Ba(!0)},refresh:function(){this._super();var a="rtl"===this.dc()!==this.Cf;a&&this.bV();this.Ba(a)},Al:function(){this._super();this.Yc&&this.Ba(this.Yc[0])},wn:function(){this._super();this.Yc&&this.Ba(this.Yc[0])},uf:function(a,b,c){this.ija(b);this.wf(b,c,{launcher:f(b.target).closest(":tabbable")})},Ba:function(c){if(this.hw()){this.Yc=
null;this.Cf="rtl"===this.dc();this.In=a.v.Ud();var d=this.element,e=this.options;if(c){var f=this;this.xo=function(a){f.bma(a)};this.Ct=function(a){f.Hga(a)};this.Pt=function(){f.Yha()};this.Ek=function(){f.Xha()};this.mo=function(){f.Wha()};if(!this.Gf){var q={};q.X5=v;var t={a6:"oj-masonrylayout-transition-resize-to",Z5:"oj-masonrylayout-transition-resize-to-fast",e6:"oj-masonrylayout-tile-transition-move-to",d6:"oj-masonrylayout-tile-transition-move-to-fast",b6:"oj-masonrylayout-tile-transition-hide-from",
c6:"oj-masonrylayout-tile-transition-hide-to"};t.g6=x;t.h6="oj-masonrylayout-tile-transition-show-to";t.f6="oj-masonrylayout-tile-transition-resize-to";var n={};n.O1=m;n.n5=l;n.C3=k;n.L3=h;n.J5=this.xo;n.X3=this.Ct;n.u4=this.Pt;n.t4=this.Ek;n.s4=this.mo;n.L5=g;n.gf=a.Components.gf;n.Lg=a.Components.Lg;this.Vka();this.Gf=new b(d[0],this.Cf,"enabled"===a.ba.GN(),q,t,n)}this.xX=function(a){f.Jfa(a)};this.uX=function(a){f.Ffa(a)};this.wX=function(a){f.Ifa(a)};this.vX=function(a){f.Gfa(a)};this.sX=function(a){f.Efa(a)};
this.yX=function(a){f.Kfa(a)};e.reorderHandle&&this.F0()}else e=d.children(),this.jM(e),this.$L(e),this.Vaa();this.Gf.Wj(c);c&&(this.eh=function(){f.af()},a.v.Ph(d[0],this.eh))}else d=!1,this.Yc&&(d=this.Yc[0]),this.Yc=[c||d]},_destroy:function(){this.Zp();var b=this.element;a.v.Si(b[0],this.eh);this.eh=null;this.Ska();for(var c=this.yk(),d=c.length,e=0;e<d;e++)delete c[e].sc;this.bV();b.removeClass("oj-masonrylayout oj-component");this.options.reorderHandle&&this.n1();this.Ps=this.mo=this.Ek=this.Pt=
this.Ct=this.xo=this.yX=this.sX=this.vX=this.wX=this.uX=this.xX=null;this._super()},_setOption:function(b,c,d){var e=!1;switch(b){case "reorderHandle":this.n1();e=!0;break;case "disabled":a.q.warn(u);break;case "contextMenu":a.v.Ud()||(this.Zp(),c&&this.co(c))}this._super(b,c,d);e&&c&&this.F0()},resizeTile:function(a,b){var c=this.Gf;c.sE()&&c.gE();var d=f(a),e=d[0],g=k(e);if(b==g)throw Error("JET MasonryLayout: Unable to resize child "+a+" to style class "+b+" because "+b+" is already applied.");
!1!==this._trigger("beforeResize",null,{tile:d,previousSizeStyleClass:g,sizeStyleClass:b})&&(this.cw||(this.cw=[]),this.cw.push(e,g,b),c.resizeTile(a,b))},insertTile:function(b,c){var d=this.Gf;d.sE()&&d.gE();isNaN(c)&&(c=-1);var e=f(b),g=e[0];!1!==this._trigger("beforeInsert",null,{tile:e,index:c})&&(g.TY=c,d.Eg()&&e.addClass(x),e=g.style,e.top="-1px",this.Cf?e.right="-1px":e.left="-1px",this.eo(g,c),d.Bpa(g,c),a.Components.gf(g),this.Ps||(this.Ps=[]),this.Ps.push(b))},removeTile:function(b){var c=
this.Gf;c.sE()&&c.gE();var d=f(b),e=d[0];if(a.ud.UD(e)){var g=this.yk(!0),e=g.indexOf(e);0<e&&(this.lI=g[e-1])}!1!==this._trigger("beforeRemove",null,{tile:d})&&c.upa(b)},af:function(){this.gw||this.YX||this.Gf.vqa()},bma:function(a){var b=f(a),c=a.TY;delete a.TY;this.options.reorderHandle&&this.$L(b);this._trigger("insert",null,{tile:b,index:c})},Hga:function(b){var c=f(b);this.options.reorderHandle&&this.jM(c);a.Components.Lg(b);b.parentNode.removeChild(b);this.WC(b);this._trigger("remove",null,
{tile:c})},Yha:function(){if(this.Ps){for(var a=this.Gf,b=this.Ps,c=0;c<b.length;c++)a.Lqa(b[c]);this.Ps=null}if(this.cw){a=this.cw;for(c=0;c<a.length;c+=3){var b=a[c+1],d=a[c+2],b={tile:f(a[c]),previousSizeStyleClass:b,sizeStyleClass:d};this._trigger("resize",null,b)}this.cw=null}this.gw&&(this.IA?this.Hfa():this.hH&&this.tX())},Xha:function(){this.YX=!0;this.CC=null;var b=document.activeElement;b&&a.v.bl(this.element[0],b)&&(this.CC=b)},Wha:function(){this.YX=!1;var b=this.element[0];if(this.CC){var c=
this.CC;this.CC=null;if(this.lI){if(c=this.lI,this.lI=null,c&&a.v.bl(b,c)){var b=this.yk(b,!0),d=b.indexOf(c);0<=d&&d<b.length-1?a.ud.DN(b[d+1]):a.ud.DN(c)}}else a.v.bl(b,c)?a.ud.Ey(c):a.ud.DN(b)}},bV:function(){var a=this.Gf;a&&a.destroy();this.Gf=null},hw:function(){var a=document.createElement("div"),b=a.style;b.width="10px";b.height="10px";b=this.element[0];b.appendChild(a);var c=!1;try{c=0<a.offsetWidth&&0<a.offsetHeight}catch(d){}b.removeChild(a);return c},yk:function(a){for(var b=this.element.children(v),
c=b.length,d=[],e=0;e<c;e++){var f=b[e];if(!a||a&&f!==this.Ad){var g=f.style;g.visibility!==p&&g.display!==r&&d.push(f)}}return d},Vka:function(){var a=this.yk();if(a)for(var b=0;b<a.length;b++){var c=a[b];c.sc||(c.sc=b+1)}},Vaa:function(){var a=this.yk();if(a)for(var b=0;b<a.length;b++){var c=a[b];c.sc||this.eo(c,b)}},Ska:function(){var b=this.yk(),c=this.yk();g(c);for(var d=0;d<b.length;d++){var e=b[d],f=c[d];e!=f&&(a.Components.Lg(f),e.parentNode.insertBefore(f,e),a.Components.gf(f),e=b.indexOf(f),
e>d&&(b.splice(e,1),b.splice(d,0,f)))}},eo:function(a,b){var c=this.yk();0>b&&(b=c.length);if(c)for(var d=0;d<c.length;d++){var e=c[d];e.sc&&e.sc>=b+1&&e.sc++}a.sc=b+1},WC:function(a){if(a.sc){var b=this.yk();if(b)for(var c=0;c<b.length;c++){var d=b[c];d.sc&&d.sc>a.sc&&d.sc--}delete a.sc}},co:function(a){var b=null,c=null;a||this.options.contextMenu||(b=this.element.attr("contextmenu"))&&(this.options.contextMenu="#"+b);if(a||this.options.contextMenu){b=a||this.options.contextMenu;c=f.type(b);if("function"==
c){try{b=b()}catch(d){b=null}c=f.type(b)}if("string"===c){if(b=f(b)){b.css("display",r);c=this.pa;if(!c)return;c.Pe=b;c.sh=!0}this.pa.sh&&a&&this.aw()}}},aw:function(){if(this.pa&&this.pa.sh&&this.options.reorderHandle){var a=this.pa.Pe,b=this;a.on("ojselect",f.proxy(this.uj,this));var c=!1;a.find("[data-oj-command]").each(function(){if(0===f(this).children("a").length){var a=f(this).attr("data-oj-command").slice(17);f(this).replaceWith(b.ti(a));f(this).addClass("oj-menu-item");c=!0}});c&&a.ojMenu("refresh");
this.pa.AP=a.find("#"+w);this.pa.$m=a.find("#"+y);this.pa.np=a.find("#"+C)}},Zp:function(){var a=this.pa;a&&a.sh&&(a.sh=!1,a.Pe.off("ojselect"),a.Pe=null)},ija:function(a){a=c(a.originalEvent.target,this.element[0]);this.pa.tile=a;if(this.pa.sh){var b=this.pa.YD,e=!1,f=this.pa.AP;if(f){var g=f.hasClass(q),h=!1;b&&a===b&&(h=!0);h&&!g?(f.addClass(q),e=!0):!h&&g&&(f.removeClass(q),e=!0)}if(f=this.pa.$m)g=f.hasClass(q),h=!1,b&&a!==b&&a!==d(b)||(h=!0),h&&!g?(f.addClass(q),e=!0):!h&&g&&(f.removeClass(q),
e=!0);if(f=this.pa.np)g=f.hasClass(q),h=!1,b&&b!==a&&b!==d(a)||(h=!0),h&&!g?(f.addClass(q),e=!0):!h&&g&&(f.removeClass(q),e=!0);e&&this.pa.Pe.ojMenu("refresh")}},ti:function(a){var b=J[a];a=H[a];var c=f('\x3ca href\x3d"#"\x3e\x3c/a\x3e');c.text(this.A(a));c.wrap("\x3cli id\x3d"+b+"\x3e\x3c/li\x3e");return c.parent()},mia:function(a){a&&(this.pa.YD=a)},iZ:function(a,b){if(a&&this.pa.YD){var c=this.pa.YD;this.pa.YD=!1;this.Ica(c,a,b)}},Ica:function(a,b,c){var e=a.sc-1,g=f(a);if(!1!==this._trigger("beforeReorder",
null,{tile:g,fromIndex:e})){this.WC(a);var h=b.sc-1;c||h++;var k=this.element[0];c||(b=d(b));this.eo(a,h);k.insertBefore(a,b);this.Gf.Wj(!0);this._trigger("reorder",null,{tile:g,fromIndex:e,toIndex:h})}},uj:function(a,b){var c=b?b.item.attr("id"):void 0;c===w?this.mia(this.pa.tile):c===y?this.iZ(this.pa.tile,!0):c===C&&this.iZ(this.pa.tile,!1)},kX:function(a){var b=this.yk(!0);g(b);for(var c=b.length,d=0;d<c;d++)if(b[d]===a)return d;return-1},F0:function(){var a=this.element,b=a.children();this.$L(b);
a.on("dragstart"+this.Fr,this.xX).on("dragenter"+this.Fr,this.uX).on("dragover"+this.Fr,this.wX).on("dragleave"+this.Fr,this.vX).on("dragend"+this.Fr,this.sX).on("drop"+this.Fr,this.yX)},$L:function(a){var b=this.options;a.filter(b.reorderHandle).attr(s,"true").addClass(t);a.find(b.reorderHandle).attr(s,"true").addClass(t)},n1:function(){var a=this.element,b=a.children();this.jM(b);a.off(this.Fr)},jM:function(a){var b=this.options;a.filter(b.reorderHandle).removeAttr(s).removeClass(t);a.find(b.reorderHandle).removeAttr(s).removeClass(t)},
Jfa:function(a){if(this.options.reorderHandle&&!this.gw){var b=c(a.target,this.element[0]);if(b){var d=this.kX(b);b.BK=d;d={tile:f(b),fromIndex:d};!1!==this._trigger("beforeReorder",null,d)&&(a=a.originalEvent,this.wI(b,a.pageX,a.pageY,a.dataTransfer))}}},Ffa:function(b){b=b.originalEvent;var c=b.relatedTarget,d=this.element[0],e=!1;c?e=d!=c&&!a.v.bl(d,c):this.qV&&(e=(c=document.elementFromPoint(b.clientX,b.clientY))&&(c==d||a.v.bl(d,c)));e&&((this.qV=!1,this.Rn)?this.Ad&&(f(this.Ad).css("display",
""),this.Gf.Wj(!1,!0)):b.dataTransfer.dropEffect="none")},Ifa:function(a){var b=a.originalEvent;b.dataTransfer.dropEffect="move";this.Pca(b.pageX,b.clientX,b.clientY);a.preventDefault();return!1},Gfa:function(b){var c=b.originalEvent,d=c.relatedTarget;b=this.element[0];var e=!1;e=d?b!=d&&!a.v.bl(b,d):(c=document.elementFromPoint(c.clientX,c.clientY))&&c!=b&&!a.v.bl(b,c);e&&(this.qV=!0,this.Ad&&(f(this.Ad).css("display",r),this.Gf.Wj(!1,!0)))},$T:function(){if(this.lB){clearTimeout(this.lB);this.lB=
null;var a=this.Rn;a&&f(a).removeClass("oj-drag")}},Efa:function(){this.$T();if(!this.jH){var b=this.Rn;if(b&&this.Ad){var c=this.Ad;a.v.bl(this.element[0],b)&&(f(c).css("display",""),this.WC(c),c.parentNode.removeChild(c),f(b).css("display",""),this.eo(b,b.sc-1),this.Gf.Wj(!1,!0));delete b.BK}this.Ad=this.Rn=null;this.KA=this.IA=!1;this.vI=null;this.gw=this.hH=!1}},Kfa:function(a){var b=this.Gf;b.sE()&&b.gE();this.$T();b=a.originalEvent;this.Xca(this.Rn,b.pageX,b.pageY);a.stopPropagation();return!1},
wI:function(b,c,d,e){this.gw=!0;this.iH=this.KA=this.jH=!1;this.Rn=b;var g=this.element[0],h=k(b),q=this.Ad=document.createElement("div");q.sc=b.sc;q.className=h+" oj-drop";var h=q.style,l=b.style;h.top=l.top;this.Cf?h.right=l.right:h.left=l.left;h=f(b).offset();g.insertBefore(q,b);this.vI=c={left:c-h.left,top:d-h.top};f(b).addClass("oj-drag");e.effectAllowed="move";e.setData("text/html",b.outerHTML);e.setDragImage(b,c.left,c.top);var t=this;this.lB=setTimeout(function(){t.iH=!0;l.display=r;f(b).removeClass("oj-drag");
t.lB=null;a.Components.jp(b)},0)},Pca:function(a,b,e){this.KA=!0;if(this.iH&&!this.IA){var g=this.element[0];b=document.elementFromPoint(b,e);if((b=c(b,g))&&b!==this.Ad&&b!==this.Rn){var h=f(g).offset();e=d(this.Ad);a=a-h.left>=b.offsetLeft+.5*b.offsetWidth;this.WC(this.Ad);a&&!this.Cf||!a&&this.Cf?(a=d(b))?(this.eo(this.Ad,a.sc-1),g.insertBefore(this.Ad,a)):(this.eo(this.Ad,b.sc),g.appendChild(this.Ad)):(this.eo(this.Ad,b.sc-1),g.insertBefore(this.Ad,b));e!==d(this.Ad)&&(this.IA=this.Gf.Wj(!1,!0))}}},
Hfa:function(){this.IA=!1},Xca:function(b,c,d){this.jH=!0;var e=this.element[0],g=this.Ad;this.Ad=null;a.Components.Lg(b);e.replaceChild(b,g);a.Components.gf(b);b.sc=g.sc;g=b.style;g.display="";a.Components.Vm(b);var h=f(e).offset(),k=this.vI;g.top=d-k.top-h.top+n;c=c-k.left-h.left;this.Cf?(g.right=e.offsetWidth-(c+f(b).outerWidth(!0))+n,g.left=""):g.left=c+n;this.vI=null;this.KA?this.hH=this.Gf.Wj(!1,!0):this.tX()},tX:function(){this.iH=this.KA=this.jH=this.gw=this.hH=!1;var a=this.Rn;this.Rn=null;
var b=a.BK;delete a.BK;var c=this.kX(a),a={tile:f(a),fromIndex:b,toIndex:c};this._trigger("reorder",null,a)},getNodeBySubId:function(a){return this._super(a)},getSubIdByNode:function(a){return this._super(a)}});var n="px",p="hidden",r="none",s="draggable",q="oj-disabled",t="oj-draggable",v=".oj-masonrylayout-tile-1x1, .oj-masonrylayout-tile-1x2, .oj-masonrylayout-tile-1x3, .oj-masonrylayout-tile-2x1, .oj-masonrylayout-tile-2x2, .oj-masonrylayout-tile-2x3, .oj-masonrylayout-tile-3x1, .oj-masonrylayout-tile-3x2",
x="oj-masonrylayout-tile-transition-show-from",u="JET MasonryLayout: 'disabled' option not supported",w="ojmasonrylayoutcut",y="ojmasonrylayoutpastebefore",C="ojmasonrylayoutpasteafter",J={cut:w,"paste-before":y,"paste-after":C},H={cut:"labelCut","paste-before":"labelPasteBefore","paste-after":"labelPasteAfter"}})()});