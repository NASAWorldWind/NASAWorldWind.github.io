/**
 * Copyright (c) 2014, 2016, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
"use strict";
define(["ojs/ojcore","knockout","promise"],function(a,f){a.ea={};a.ea.fR={coverStart:{Ar:"oj-animation-coverstart",ap:"oj-animation-coverstart",bp:!0},coverUp:{ap:"oj-animation-coverup",bp:!0},fade:{Ar:"oj-animation-fade",ap:"oj-animation-fade",bp:!1},revealDown:{Ar:"oj-animation-revealdown",bp:!1},revealEnd:{Ar:"oj-animation-revealend",ap:"oj-animation-revealend",bp:!1},zoomIn:{ap:"oj-animation-zoomin",bp:!0},zoomOut:{Ar:"oj-animation-zoomout",bp:!1}};a.ea.mT=function(a,d,c){var e=$(a);return new Promise(function(a){function b(){a(!0)}
var f="oj-"+c,l=f+"-active";e.addClass(d);e.addClass(f);window.requestAnimationFrame(function(){e.addClass(l)});if((f=e.css("animationDuration")||e.css("webkitAnimationDuration"))&&"0s"!=f)e.on("animationend webkitAnimationEnd",b);else if((f=e.css("transitionDuration")||e.css("webkitTransitionDuration"))&&"0s"!=f)e.on("transitionend webkitTransitionEnd",b);else a(!0)})};a.ea.$$=function(b,d,c){var e=[];c=a.ea.fR[c];b&&c&&c.Ar&&e.push(a.ea.mT(b,c.Ar,"leave"));d&&c&&c.ap&&e.push(a.ea.mT(d,c.ap,"enter"));
return Promise.all(e)};a.ea.$S=function(a,d){for(var c=f.virtualElements.firstChild(a);c;)1==c.nodeType?d.push(c):8==c.nodeType&&this.$S(c,d),c=f.virtualElements.nextSibling(c)};a.ea.Eaa=function(a,d){a._ojOldRoot=d};a.ea.dfa=function(a){return a._ojOldRoot};a.ea.SU=function(b){if(b.isInitial)return!1;if(1==b.node.nodeType)return!0;if(8==b.node.nodeType){var d=[];a.ea.$S(b.node,d);if(d&&1==d.length)return a.ea.Eaa(b,d[0]),!0}return!1};a.ea.Dea=function(b){var d;1==b.node.nodeType?d=b.node:8==b.node.nodeType&&
(d=a.ea.dfa(b));return d};a.ea.dI=function(a){var d=$(document.createElement("div")),c={position:"absolute",height:a.offsetHeight+"px",width:a.offsetWidth+"px",left:a.offsetLeft+"px",top:a.offsetTop+"px"};d.appendTo(a.offsetParent);d.css(c);d.addClass("oj-animation-host-viewport");a=document.createElement("div");a.className="oj-animation-host";d.append(a);return a};a.ea.VU=function(b,d){var c={},e=a.ea.fR[d],f=a.ea.Dea(b);e&&(e.ap&&!e.bp&&(c.newViewParent=a.ea.dI(f)),e.Ar&&(c.oldViewParent=a.ea.dI(f)),
e.ap&&e.bp&&(c.newViewParent=a.ea.dI(f)));return c};a.ea.RU=function(b,d){return a.ea.$$(b.oldViewParent,b.newViewParent,d).then(function(){a.ea.gja(b)})};a.ea.D_=function(a,d){var c=a[d];c&&(c=c.parentNode)&&c.parentNode&&c.parentNode.removeChild(c)};a.ea.gja=function(b){b.removeOldView();b.insertNewView();a.ea.D_(b,"newViewParent");a.ea.D_(b,"oldViewParent")};a.ea.oq=function(b){return{canAnimate:a.ea.SU,prepareAnimation:function(d){return a.ea.VU(d,b)},animate:function(d){return a.ea.RU(d,b)}}};
a.ea.nJ=function(b){null==a.ea.OK&&(a.ea.OK=a.Ee.Z4("oj-animation-navigate-methods"));return a.ea.OK?a.ea.OK[b]:null};a.ea.Gia=function(b,d){return a.ea.nJ(d)&&a.ea.SU(b)};a.ea.Hia=function(b,d){var c=a.ea.nJ(d);return a.ea.VU(b,c)};a.ea.Fia=function(b,d){var c=a.ea.nJ(d);return a.ea.RU(b,c)};a.ea.HW=function(b){return{canAnimate:function(d){return a.ea.Gia(d,b)},prepareAnimation:function(d){return a.ea.Hia(d,b)},animate:function(d){return a.ea.Fia(d,b)}}};a.ea.Nna=a.ea.oq("coverStart");o_("ModuleAnimations.coverStart",
a.ea.Nna,a);a.ea.zqa=a.ea.oq("revealEnd");o_("ModuleAnimations.revealEnd",a.ea.zqa,a);a.ea.Ona=a.ea.oq("coverUp");o_("ModuleAnimations.coverUp",a.ea.Ona,a);a.ea.yqa=a.ea.oq("revealDown");o_("ModuleAnimations.revealDown",a.ea.yqa,a);a.ea.ora=a.ea.oq("zoomIn");o_("ModuleAnimations.zoomIn",a.ea.ora,a);a.ea.pra=a.ea.oq("zoomOut");o_("ModuleAnimations.zoomOut",a.ea.pra,a);a.ea.voa=a.ea.oq("fade");o_("ModuleAnimations.fade",a.ea.voa,a);a.ea.ooa=a.ea.HW("drillIn");o_("ModuleAnimations.drillIn",a.ea.ooa,
a);a.ea.poa=a.ea.HW("drillOut");o_("ModuleAnimations.drillOut",a.ea.poa,a);a.ea.Tqa=function(b){return new function(){function d(a){return function(b){return c[a].call(c,b)}}var c,e=this;this.canAnimate=function(f){var h=b(f);c=null==h?null:a.ModuleAnimations[h];if(!c)return!1;for(var h=["prepareAnimation","animate"],k=0;k<h.length;k++){var l=h[k];e[l]=d(l)}return d("canAnimate")(f)}}};o_("ModuleAnimations.switcher",a.ea.Tqa,a)});