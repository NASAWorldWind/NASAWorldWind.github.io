/**
 * Copyright (c) 2014, 2016, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
"use strict";
define(["ojs/ojcore","jquery","ojs/ojpagingtabledatasource"],function(a){a.di=function(a,b){this.wE=a;this.Im=b};o_("PagingCellSet",a.di,a);a.di.prototype.getData=function(a){return this.wE.getData({column:a.column,row:a.row+this.Im})};a.b.g("PagingCellSet.prototype.getData",{getData:a.di.prototype.getData});a.di.prototype.getMetadata=function(a){return this.wE.getMetadata({column:a.column,row:a.row+this.Im})};a.b.g("PagingCellSet.prototype.getMetadata",{getMetadata:a.di.prototype.getMetadata});a.di.prototype.R=
function(a){return this.wE.R(a)};a.b.g("PagingCellSet.prototype.getCount",{R:a.di.prototype.R});a.di.prototype.V2=function(){return this.wE};a.b.g("PagingCellSet.prototype.getCellSet",{V2:a.di.prototype.V2});a.di.prototype.Ly=function(){return this.Im};a.b.g("PagingCellSet.prototype.getStartIndex",{Ly:a.di.prototype.Ly});a.Ma=function(f){if(!(f instanceof a.bn))throw new a.X("Not a datagridatasource","Not a datagridatasource",a.X.Tb.ERROR);this.uc=f;this.$=0;this.Init()};o_("PagingDataGridDataSource",
a.Ma,a);a.b.ga(a.Ma,a.bn,"oj.PagingDataGridDataSource");a.Ma.prototype.Init=function(){a.Ma.r.Init.call(this);this.Rx()};a.b.g("PagingDataGridDataSource.prototype.Init",{Init:a.Ma.prototype.Init});a.Ma.prototype.Rx=function(){this.uc.on("change",this.qfa.bind(this))};a.Ma.prototype.getPage=function(){return this.Kc};a.b.g("PagingDataGridDataSource.prototype.getPage",{getPage:a.Ma.prototype.getPage});a.Ma.prototype.setPage=function(f,b){b=b||{};f=parseInt(f,10);try{a.Ma.r.handleEvent.call(this,a.bc.D.BEFOREPAGE,
{page:f,previousPage:this.Kc})}catch(d){return Promise.reject(null)}this.Ja=null!=b.pageSize?b.pageSize:this.Ja;b.startIndex=f*this.Ja;var c=this.Kc;this.Kc=f;this.$=b.startIndex;var e=this;return new Promise(function(a,d){e.Ie(b).then(function(){a(null)},function(){e.Kc=c;e.$=e.Kc*e.Ja;d(null)})})};a.b.g("PagingDataGridDataSource.prototype.setPage",{setPage:a.Ma.prototype.setPage});a.Ma.prototype.Ie=function(a){this.Zl=!0;this.$=a.startIndex;var b=this;return new Promise(function(a){b.handleEvent("change",
{operation:"sync",pageSize:b.Ja});a(void 0)})};a.Ma.prototype.fetch=function(a){this.Ja=a.pageSize+a.startIndex;a.startIndex=0;return this.Ie(a)};a.b.g("PagingDataGridDataSource.prototype.fetch",{fetch:a.Ma.prototype.fetch});a.Ma.prototype.getStartItemIndex=function(){return this.$};a.b.g("PagingDataGridDataSource.prototype.getStartItemIndex",{getStartItemIndex:a.Ma.prototype.getStartItemIndex});a.Ma.prototype.getEndItemIndex=function(){return this.wi};a.b.g("PagingDataGridDataSource.prototype.getEndItemIndex",
{getEndItemIndex:a.Ma.prototype.getEndItemIndex});a.Ma.prototype.getPageCount=function(){var a=this.totalSize();return-1==a?-1:Math.ceil(a/this.Ja)};a.b.g("PagingDataGridDataSource.prototype.getPageCount",{getPageCount:a.Ma.prototype.getPageCount});a.Ma.prototype.qfa=function(f){switch(f.operation){case "refresh":this.$=0;this.handleEvent("change",{operation:"sync",pageSize:this.Ja});this.handleEvent(a.la.D.REFRESH,null);break;case "reset":this.handleEvent(a.la.D.RESET,null);break;case "insert":this.handleEvent(a.la.D.ADD,
{index:f.indexes.row});break;case "delete":this.handleEvent(a.la.D.REMOVE,null);break;case "update":f.indexes.row=0<=f.indexes.row-this.$?f.indexes.row-this.$:-1;this.handleEvent("change",f);break;default:this.handleEvent("change",f),this.handleEvent(a.la.D.SYNC,null)}};a.Ma.prototype.R=function(a){var b=this.uc.R(a);return"row"===a&&0<=b?this.$+this.Ja<b?this.Ja:b-this.$:b};a.b.g("PagingDataGridDataSource.prototype.getCount",{R:a.Ma.prototype.R});a.Ma.prototype.yg=function(a){return this.uc.yg(a)};
a.b.g("PagingDataGridDataSource.prototype.getCountPrecision",{yg:a.Ma.prototype.yg});a.Ma.prototype.Of=function(f,b,d){var c;null==this.Zl?(c=new a.Gd(0,0,f.axis,null),null!=b&&b.success&&b.success.call(d.success,c,f)):"row"===f.axis?(f.start+=this.$,f.start+f.count>this.$+this.Ja&&(f.count=this.Ja-f.start),this.Yt={callbacks:b,callbackObjects:d},this.uc.Of(f,{success:this.YJ.bind(this),error:this.rga.bind(this)},d)):this.uc.Of(f,b,d)};a.b.g("PagingDataGridDataSource.prototype.fetchHeaders",{Of:a.Ma.prototype.Of});
a.Ma.prototype.YJ=function(f,b){var d,c,e;b.start-=this.$;b.count+=1;d=new a.Ce(f,this.$);c=this.Yt.callbacks.success;e=this.Yt.callbackObjects.success;this.Yt=null;c.call(e,d,b)};a.Ma.prototype.rga=function(a){var b,d;b=this.Yt.callbacks.error;d=this.Yt.callbackObjects.error;this.Yt=null;b.call(d,a)};a.Ma.prototype.xg=function(f,b,d){var c;if(null==this.Zl)c=new a.Zf(0,0,0,0,null),null!=b&&b.success&&b.success.call(d.success,c,f);else{for(c=0;c<f.length;c+=1)"row"===f[c].axis&&(f[c].start+=this.$,
f[c].start+f[c].count>this.$+this.Ja&&(f[c].count=this.Ja-f[c].start));this.Wt={callbacks:b,callbackObjects:d};this.uc.xg(f,{success:this.pfa.bind(this),error:this.ofa.bind(this)},d)}};a.b.g("PagingDataGridDataSource.prototype.fetchCells",{xg:a.Ma.prototype.xg});a.Ma.prototype.pfa=function(f,b){var d,c,e;for(d=0;d<b.length;d+=1)"row"===b[d].axis&&(b[d].start-=this.$,b[d].count+=1);d=new a.di(f,this.$);c=this.Wt.callbacks.success;e=this.Wt.callbackObjects.success;this.Wt=null;this.wi=this.$+f.R("row")-
1;this.handleEvent("sync",{data:Array(f.R("row")),startIndex:this.$});c.call(e,d,b)};a.Ma.prototype.ofa=function(a){var b,d;b=this.Wt.callbacks.error;d=this.Wt.callbackObjects.error;this.Wt=null;b.call(d,a)};a.Ma.prototype.keys=function(a){return this.uc.keys({column:a.column,row:a.row+this.$})};a.b.g("PagingDataGridDataSource.prototype.keys",{keys:a.Ma.prototype.keys});a.Ma.prototype.Dg=function(a){a=this.uc.Dg(a);-1!=a.row&&(a.row-=this.$);return a};a.b.g("PagingDataGridDataSource.prototype.indexes",
{Dg:a.Ma.prototype.Dg});a.Ma.prototype.getCapability=function(a){return this.uc.getCapability(a)};a.b.g("PagingDataGridDataSource.prototype.getCapability",{getCapability:a.Ma.prototype.getCapability});a.Ma.prototype.size=function(){var a;if(null==this.Zl)return-1;a=this.uc.R("row");return this.uc.R("row")>this.Ja?this.Ja:a};a.b.g("PagingDataGridDataSource.prototype.size",{size:a.Ma.prototype.size});a.Ma.prototype.sort=function(a,b,d){this.uc.sort(a,b,d)};a.b.g("PagingDataGridDataSource.prototype.sort",
{sort:a.Ma.prototype.sort});a.Ma.prototype.totalSize=function(){return null==this.Zl?-1:this.uc.R("row")};a.b.g("PagingDataGridDataSource.prototype.totalSize",{totalSize:a.Ma.prototype.totalSize});a.Ma.prototype.totalSizeConfidence=function(){return"actual"};a.b.g("PagingDataGridDataSource.prototype.totalSizeConfidence",{totalSizeConfidence:a.Ma.prototype.totalSizeConfidence});a.Ma.prototype.rd=function(a,b,d){return this.uc.rd(a,b,d)};a.b.g("PagingDataGridDataSource.prototype.moveOK",{rd:a.Ma.prototype.rd});
a.Ma.prototype.move=function(a,b,d,c,e){this.uc.move(a,b,d,c,e)};a.b.g("PagingDataGridDataSource.prototype.move",{move:a.Ma.prototype.move});a.Ce=function(a,b){this.wr=a;this.Im=b};o_("PagingHeaderSet",a.Ce,a);a.Ce.prototype.getData=function(a,b){return this.wr.getData(a+this.Im,b)};a.b.g("PagingHeaderSet.prototype.getData",{getData:a.Ce.prototype.getData});a.Ce.prototype.getMetadata=function(a,b){return this.wr.getMetadata(a+this.Im,b)};a.b.g("PagingHeaderSet.prototype.getMetadata",{getMetadata:a.Ce.prototype.getMetadata});
a.Ce.prototype.R=function(){return this.wr.R()};a.b.g("PagingHeaderSet.prototype.getCount",{R:a.Ce.prototype.R});a.Ce.prototype.Ag=function(){return this.wr.Ag()};a.b.g("PagingHeaderSet.prototype.getLevelCount",{Ag:a.Ce.prototype.Ag});a.Ce.prototype.Vb=function(a,b){return this.wr.Vb(a+this.Im,b)};a.b.g("PagingHeaderSet.prototype.getExtent",{Vb:a.Ce.prototype.Vb});a.Ce.prototype.oe=function(a,b){return this.wr.oe(a+this.Im,b)};a.b.g("PagingHeaderSet.prototype.getDepth",{oe:a.Ce.prototype.oe});a.Ce.prototype.l3=
function(){return this.wr};a.b.g("PagingHeaderSet.prototype.getHeaderSet",{l3:a.Ce.prototype.l3});a.Ce.prototype.Ly=function(){return this.Im};a.b.g("PagingHeaderSet.prototype.getStartIndex",{Ly:a.Ce.prototype.Ly})});