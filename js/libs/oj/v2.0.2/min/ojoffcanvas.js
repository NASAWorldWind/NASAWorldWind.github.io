/**
 * Copyright (c) 2014, 2016, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
"use strict";
define(["ojs/ojcore","jquery","hammerjs","promise","ojs/ojjquery-hammer","ojs/ojcomponentcore"],function(a,f,b){a.o={};o_("OffcanvasUtils",a.o,a);a.o.$F="oj-offcanvasEdge";a.o.wl="oj-offcanvas";a.o.aG="oj-mediaQueryListener";a.o.bR="oj-offcanvasHammer";a.o.tv="selector";a.o.gv="start";a.o.fv="end";a.o.LP="top";a.o.jF="bottom";a.o.dv="displayMode";a.o.ev="push";a.o.KP="overlay";a.o.X6="modality";a.o.sra="none";a.o.Y6="modal";a.o.vz="_dismissHandler";a.o.EF="_openPromise";a.o.cv="_closePromise";a.o.wz=
"_glassPane";a.o.xQ="_surrogate";a.o.HF="data-oj-offcanvas-surrogate-id";a.o.j7="oj-offcanvas-outer-wrapper";a.o.kQ="oj-offcanvas-open";a.o.ln="oj-offcanvas-transition";a.o.I6="oj-offcanvas-glasspane";a.o.SP="oj-offcanvas-glasspane-dim";a.o.tra="oj-offcanvas-generated";a.o.x7="ojbeforeopen veto";a.o.w7="ojbeforeclose veto";a.o.Ula={start:"oj-offcanvas-shift-start",end:"oj-offcanvas-shift-end",top:"oj-offcanvas-shift-down",bottom:"oj-offcanvas-shift-up"};a.o.Wca={start:"oj-offcanvas-start",end:"oj-offcanvas-end",
top:"oj-offcanvas-top",bottom:"oj-offcanvas-bottom"};a.o.Vda=function(b){b=b[a.o.dv];b!==a.o.KP&&b!==a.o.ev&&(b=a.Ee.Yk("offcanvas").displayMode);return b};a.o.Gh=function(b){return f(b[a.o.tv])};a.o.yK=function(b){return b[a.o.X6]===a.o.Y6};a.o.io=function(b){return b.hasClass(a.o.kQ)};a.o.st=function(b){return b.closest("."+a.o.j7)};a.o.DB=function(b){var c=a.o.Gh(b);return b[a.o.dv]===a.o.ev?c.parent():c};a.o.aX=function(b){var c=a.o.Ula[b];if(!c)throw"Invalid edge: "+b;return c};a.o.ie=function(){return"rtl"===
a.v.zm()};a.o.VL=function(a,b){a.css({"-webkit-transform":b,"-ms-transform":b,transform:b})};a.o.gD=function(b,c,e){c=c===a.o.fv;a.o.ie()&&(c=!c);a.o.VL(b,"translate3d("+(c?"-":"")+e+", 0, 0)")};a.o.Lla=function(b,c,e){a.o.VL(b,"translate3d(0, "+(c===a.o.jF?"-":"")+e+", 0)")};a.o.V_=function(b){var c=b.edge;b=a.o.Gh(b);c&&c.length||(c=b.hasClass("oj-offcanvas-start")?a.o.gv:b.hasClass("oj-offcanvas-end")?a.o.fv:b.hasClass("oj-offcanvas-top")?a.o.LP:b.hasClass("oj-offcanvas-bottom")?a.o.jF:a.o.gv);
f.data(b[0],a.o.$F,c);return c};a.o.YI=function(b){return f.data(b[0],a.o.$F)};a.o.rD=function(b,c,e){var f=b[a.o.dv],h=a.o.Gh(b),k=a.o.kQ,f=f===a.o.KP?a.o.ln+" oj-offcanvas-overlay":a.o.ln;e?(h.addClass(k),c.addClass(f)):(b=b.tabindex,void 0===b?h.removeAttr("tabindex"):h.attr("tabindex",b),h.removeClass(k),c.removeClass(f))};a.o.Ik=function(b){var c=a.o.Gh(b),e=c.find(":focusable");0<e.length?b=e[0]:(e=c.attr("tabindex"),void 0!==e&&(b.tabindex=e),c.attr("tabindex","-1"),b=c);a.ud.Ey(b)};a.o.sha=
function(a){return"none"!=a.autoDismiss};a.o.xZ=function(a,b){function e(){b();a.off("transitionend webkitTransitionEnd otransitionend oTransitionEnd",e)}a.on("transitionend webkitTransitionEnd otransitionend oTransitionEnd",e)};a.o.lU=function(b){a.o.close(b)["catch"](function(b){a.q.warn("Offcancas close failed: "+b)})};a.o.n_=function(b){a.o.JM(b);if(a.o.sha(b)){var c=a.o.Gh(b),e=b[a.o.vz]=function(e){var g=e.target;a.v.g4(e)||"focus"===e.type&&!f(g).is(":focusable")||(null==f.data(c[0],a.o.wl)?
a.o.JM(b):a.v.Ipa(c[0],g)||a.o.lU(b))},g=document.documentElement;a.v.Ud()&&g.addEventListener("touchstart",e,!0);g.addEventListener("mousedown",e,!0);g.addEventListener("focus",e,!0)}a.o.TC(b)};a.o.JM=function(b){var c=b[a.o.vz];if(c){var e=document.documentElement;a.v.Ud()&&e.removeEventListener("touchstart",c,!0);e.removeEventListener("mousedown",c,!0);e.removeEventListener("focus",c,!0);delete b[a.o.vz];b[a.o.vz]=null}a.o.zD(b)};a.o.TC=function(d){if(a.v.Ud()){var c=d[a.o.tv],e=f(c),g=a.o.YI(e),
h,k;g===a.o.gv&&!a.o.ie()||g===a.o.fv&&a.o.ie()?(k={recognizers:[[b.Swipe,{direction:b.DIRECTION_LEFT}]]},h="swipeleft"):g===a.o.gv&&a.o.ie()||g===a.o.fv&&!a.o.ie()?(k={recognizers:[[b.Swipe,{direction:b.DIRECTION_RIGHT}]]},h="swiperight"):g===a.o.LP?(k={recognizers:[[b.Swipe,{direction:b.DIRECTION_UP}]]},h="swipeup"):g===a.o.jF&&(k={recognizers:[[b.Swipe,{direction:b.DIRECTION_DOWN}]]},h="swipedown");e=e.jl(k).on(h,function(b){b.preventDefault();a.o.lU(d)});f.data(f(c)[0],a.o.bR,{event:h,hammer:e})}};
a.o.zD=function(b){b=a.o.Gh(b);0<b.length&&(b=f.data(b[0],a.o.bR))&&b.hammer.off(b.event)};a.o.kT=function(b){var c=a.o.Gh(b);if(f.data(c[0],a.o.wl)===b){a.o.YI(c);var e=a.o.DB(b);a.o.rD(b,e,!1);a.o.rka(b);a.o.JM(b);c.trigger("ojclose",b);f.removeData(c[0],a.o.wl)}};a.o.C0=function(b,c,e){var g=f(b);(c=!!c)&&a.o.io(g)&&a.o.Il(b,!1);g.toggleClass(a.o.Wca[e],!c)};a.o.Jqa=function(b){var c=b.query;if(null!==c){var e=b[a.o.tv],c=window.matchMedia(c),g=a.o.V_(b);b=function(b){a.o.C0(e,b.matches,g)};c.addListener(b);
a.o.C0(e,c.matches,g);f.data(f(e)[0],a.o.aG,{mqList:c,mqListener:b})}};o_("OffcanvasUtils.setupResponsive",a.o.Jqa,a);a.o.Xqa=function(b){b=a.o.Gh(b);var c=f.data(b[0],a.o.aG);c&&(c.mqList.removeListener(c.mqListener),f.removeData(b[0],a.o.aG))};o_("OffcanvasUtils.tearDownResponsive",a.o.Xqa,a);a.o.open=function(b){var c=a.o.Gh(b),e=f.data(c[0],a.o.wl);if(e){if(e[a.o.cv])return e[a.o.cv];if(e[a.o.EF])return e[a.o.EF]}var g=!1,h=new Promise(function(e,l){a.l.$c(c,jQuery);var m=a.o.V_(b),n=f.Event("ojbeforeopen");
c.trigger(n,b);if(!1===n.result)return l(a.o.x7),g=!0,h;var p,n=a.o.Vda(b),r=f.extend({},b);r[a.o.dv]=n;f.data(c[0],a.o.wl,r);var s;s=a.o.DB(r);a.l.$c(s,jQuery);a.o.rD(r,s,!0);m===a.o.gv||m===a.o.fv?(p=void 0===p?c.outerWidth(!0)+"px":p,n===a.o.ev&&a.o.gD(s,m,p)):(p=void 0===p?c.outerHeight(!0)+"px":p,n===a.o.ev&&a.o.Lla(s,m,p));var q;window.setTimeout(function(){q=a.o.st(c);a.l.$c(q,jQuery);q.addClass(a.o.aX(m))},10);a.o.daa(r,c);a.o.xZ(s,function(){s.removeClass(a.o.ln);a.o.Ik(r);c.trigger("ojopen",
r);a.o.n_(r);e(!0)})});g||(e=f.data(c[0],a.o.wl))&&(e[a.o.EF]=h);return h};o_("OffcanvasUtils.open",a.o.open,a);a.o.close=function(b){return a.o.Il(b[a.o.tv],!0)};o_("OffcanvasUtils.close",a.o.close,a);a.o.Il=function(b,c){var e=f(b);a.l.$c(e,jQuery);var g=f.data(e[0],a.o.wl);if(g&&g[a.o.cv])return g[a.o.cv];var h=!1,k=new Promise(function(l,m){if(a.o.io(e)){b!=g[a.o.tv]&&l(!0);var n=a.o.YI(e),p=g[a.o.dv],n=a.o.aX(n),r=a.o.st(e);a.l.$c(r,jQuery);r.hasClass(n)||l(!0);var s=f.Event("ojbeforeclose");
e.trigger(s,g);if(!1===s.result)return m(a.o.w7),h=!0,k;s=a.o.DB(g);if(c){var q=0,t=function(){a.o.kT(g);0!==q&&window.cancelAnimationFrame(q);l(!0)},v=function(){null==e[0].offsetParent?t():q=window.requestAnimationFrame(v)};a.o.xZ(s,t);q=window.requestAnimationFrame(v)}p===a.o.ev&&a.o.VL(s,"");r.removeClass(n);a.o.yK(g)&&g[a.o.wz].removeClass(a.o.SP);c?s.addClass(a.o.ln):(a.o.kT(g),l(!0))}else l(!0)});h||(g=f.data(e[0],a.o.wl))&&(g[a.o.cv]=k);return k};a.o.toggle=function(b){var c=a.o.Gh(b);a.l.$c(c,
jQuery);return a.o.io(c)?a.o.close(b):a.o.open(b)};o_("OffcanvasUtils.toggle",a.o.toggle,a);a.o.D$=function(b){var c=f("\x3cdiv\x3e");c.addClass(a.o.I6);c.attr("role","presentation");c.attr("aria-hidden","true");c.appendTo(b.parent());c.on("keydown keyup keypress mousedown mouseup mouseover mouseout click focusin focus",function(a){a.stopPropagation();a.preventDefault()});return c};a.o.bI=function(b){var c=f("\x3cscript\x3e"),e=b.attr("id");e?(e=[e,"surrogate"].join("_"),c.attr("id",e)):e=c.uniqueId();
c.insertBefore(b);b.attr(a.o.HF,e);return c};a.o.kma=function(b,c){b[a.o.xQ]=a.o.bI(c);c.appendTo(c.parent())};a.o.Rka=function(b){var c=a.o.Gh(b);b=b[a.o.xQ];c&&b&&c.attr(a.o.HF)===b.attr("id")&&(c.insertAfter(b),c.removeAttr(a.o.HF),b.remove())};a.o.daa=function(b,c){a.o.yK(b)&&(b[a.o.wz]=a.o.D$(c),a.o.kma(b,c),window.setTimeout(function(){b[a.o.wz].addClass(a.o.SP)},0))};a.o.rka=function(b){a.o.yK(b)&&(b[a.o.wz].remove(),a.o.Rka(b))};a.o.I5=function(d){var c,e,g,h,k,l,m,n,p,r,s,q;null==f(d).attr("oj-data-pansetup")&&
(f(d).attr("oj-data-pansetup","true"),d.displayMode="push",c=a.o.Gh(d),e=d.size,null==e&&(e=c.outerWidth()),g=a.o.st(c),h=a.o.DB(d),k={recognizers:[[b.Pan,{direction:b.DIRECTION_HORIZONTAL}]]},l=!1,f(g).jl(k).on("panstart",function(e){m=null;switch(e.gesture.direction){case b.DIRECTION_LEFT:Math.abs(e.gesture.deltaY)<Math.abs(e.gesture.deltaX)&&(m=a.o.ie()?"end":"start");break;case b.DIRECTION_RIGHT:Math.abs(e.gesture.deltaY)<Math.abs(e.gesture.deltaX)&&(m=a.o.ie()?"start":"end")}null!=m&&(n={direction:m,
distance:Math.abs(e.gesture.deltaX)},p=f.Event("ojpanstart"),c.trigger(p,n),p.isDefaultPrevented()||(d._closePromise=null,a.o.rD(d,h,!0),l=!0,e.stopPropagation()))}).on("panmove",function(b){l&&(r=Math.abs(b.gesture.deltaX),c.css("width",r),h.removeClass(a.o.ln),a.o.gD(h,"start",b.gesture.deltaX+"px"),n={direction:m,distance:r},p=f.Event("ojpanmove"),c.trigger(p,n),b.stopPropagation())}).on("panend",function(b){l&&(l=!1,r=Math.abs(b.gesture.deltaX),n={distance:r},p=f.Event("ojpanend"),c.trigger(p,
n),b.stopPropagation(),p.isDefaultPrevented()?(q=function(){a.o.rD(d,h,!1);h.removeClass(a.o.ln);h.off("transitionend webkitTransitionEnd otransitionend oTransitionEnd",q)},h.on("transitionend webkitTransitionEnd otransitionend oTransitionEnd",q),h.addClass(a.o.ln),a.o.gD(h,"start","0px")):(h.addClass(a.o.ln),c.css("width",e+"px"),s=d.edge,null==s&&(s=c.hasClass("oj-offcanvas-start")?"start":"end"),a.o.gD(h,s,e+"px"),f.data(c[0],a.o.wl,d),f.data(c[0],a.o.$F,s),a.o.n_(d)))}))};o_("OffcanvasUtils.setupPanToReveal",
a.o.I5,a);a.o.V5=function(b){b=a.o.Gh(b);f(a.o.st(b)).off("panstart panmove panend")};o_("OffcanvasUtils.tearDownPanToReveal",a.o.V5,a)});