/**
 * Copyright (c) 2014, 2016, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
"use strict";
/*
 Copyright 2013 jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
*/
define(["ojs/ojcore","jquery","ojs/ojcomponentcore","jqueryui-amd/position"],function(a,f){a.N=function(){this.Init()};a.b.ga(a.N,a.b,"oj.PopupService");a.N.prototype.Init=function(){a.N.r.Init.call(this)};a.N.re=function(){a.N.aL||(a.N.aL=new a.pb);return a.N.aL};a.N.prototype.open=function(){a.l.Yb()};a.N.prototype.close=function(){a.l.Yb()};a.N.prototype.yu=function(){a.l.Yb()};a.N.prototype.tP=function(){a.l.Yb()};a.N.prototype.destroy=function(){delete a.N.aL};a.N.bi={NONE:"none",BF:"modal",
Z6:"modeless"};a.N.Bc={ds:"ojPopupRemove",bs:"ojPopupClose",jn:"ojPopupRefresh",as:"ojPopupAutoDismiss"};a.N.en={KF:"topLevel",jQ:"nearestAncestor"};a.N.Ra={lf:"popup",qp:"events",bi:"modality",mv:"launcher",qv:"position",gn:"layerSelectors",en:"layerLevel"};a.pb=function(){this.Init()};a.b.ga(a.pb,a.N,"oj.PopupServiceImpl");a.pb.prototype.open=function(b){a.l.Kf(b);var d=b[a.N.Ra.lf];a.l.$c(d,jQuery);var c=b[a.N.Ra.mv];a.l.$c(c,jQuery);var e=b[a.N.Ra.qv];a.l.W1(e);var f=b[a.N.Ra.qp];a.l.Kf(f);var h=
b[a.N.Ra.bi];if(!h||a.N.bi.Z6!==h&&a.N.bi.BF!==h)h=a.N.bi.NONE;var k=b[a.N.Ra.gn];a.l.om(k);b=b[a.N.Ra.en];if(!b||a.N.en.KF!==b&&a.N.en.jQ!==b)b=a.N.en.jQ;a.v.B5(d,c);a.J.kna(d,c,f,h,k,b);d.show();d.removeAttr("aria-hidden");e&&d.position(e);this.eH();a.Components.Vm(d[0])};a.pb.prototype.close=function(b){a.l.Kf(b);b=b[a.N.Ra.lf];a.l.$c(b,jQuery);a.J.qqa(b);b.hide();b.attr("aria-hidden","true");a.v.B5(b,null);this.eH();a.Components.jp(b[0])};a.pb.prototype.yu=function(b){a.l.Kf(b);var d=b[a.N.Ra.lf];
a.l.$c(d,jQuery);d=a.J.Hy(d);a.l.$c(d,jQuery);var c=b[a.N.Ra.qp];c&&a.J.S1(d,c);(c=b[a.N.Ra.bi])&&a.J.T1(d,c);b=b[a.N.Ra.gn];a.Ea.Ni(b)||d.attr("class",b)};a.pb.prototype.tP=function(b,d,c){var e={};e.event=d;e.argsArray=c;b=a.J.Hy(b);a.J.SO(b,this.Gma,e)};a.pb.prototype.Gma=function(b,d){var c=d.event,e=d.argsArray,g=a.J.LN(b);g&&f.isFunction(g[c])&&g[c].apply(this,e);return a.J.Sg.op};a.pb.prototype.eH=function(){var b=a.J.U3(),d=this.PT;if(!b&&d){window.removeEventListener("resize",a.pb.vo,!0);
window.removeEventListener("scroll",a.pb.vo,!0);b=document.documentElement;b.removeEventListener("mousewheel",a.pb.vo,!0);b.removeEventListener("DOMMouseScroll",a.pb.vo,!0);delete this.PT;for(var c=0;c<a.pb.kA.length;c++){var e=a.pb.kA[c];b.removeEventListener(e,d,!0)}if(d=this.P0)d.destroy(),delete this.P0}else if(b&&!d){window.addEventListener("resize",a.pb.vo,!0);window.addEventListener("scroll",a.pb.vo,!0);b=document.documentElement;b.addEventListener("mousewheel",a.pb.vo,!0);b.addEventListener("DOMMouseScroll",
a.pb.vo,!0);d=this.PT=f.proxy(this.bda,this);for(c=0;c<a.pb.kA.length;c++)e=a.pb.kA[c],b.addEventListener(e,d,!0);a.v.Ud()&&(this.P0=new a.zh(d))}};a.pb.prototype.bda=function(b){var d=f(b.target);if(!a.J.U3())this.eH();else if(!a.v.g4(b)&&("focus"!==b.type||d.is(":focusable"))){var c=a.J.Po();if("keydown"===b.type&&a.J.tpa()&&!a.v.bl(c[0],d[0]))a.J.roa(f.Event(b));else{var e=a.J.Hy(d);if(c[0]!==e[0]){if(!e.hasClass(a.pb.Rz)){var g=this.EK;g&&g.removeClass(a.pb.Rz);e.addClass(a.pb.Rz);this.EK=e}}else if(g=
this.EK)g.removeClass(a.pb.Rz),delete this.EK;if("focus"!==b.type||"-1"!==d.attr("tabindex")){var d={},e={},h;for(h in b)a.pb.L7[h]&&!f.isFunction(b[h])&&(e[h]=b[h]);d.event=f.Event(b,e);a.J.SO(c,a.pb.Ija,d)}}}};a.pb.Ija=function(b,d){var c=a.J.LN(b),e=d.event;if(c&&f.isFunction(c[a.N.Bc.as]))c[a.N.Bc.as](e);return a.J.Sg.op};a.pb.vo=function(){isNaN(a.pb.k_)&&(a.pb.k_=window.setTimeout(function(){delete a.pb.k_;var b=a.J.Po();a.J.SO(b,a.pb.Sja)},a.pb.E9))};a.pb.Sja=function(b,d){if(0<d.level)return a.J.Sg.Cz;
var c=a.J.LN(b);if(c&&f.isFunction(c[a.N.Bc.jn]))c[a.N.Bc.jn]();return a.J.Sg.op};a.pb.prototype.destroy=function(){a.pb.r.destroy.call(this)};a.pb.Rz="oj-focus-within";a.pb.kA=["focus","mousedown","keydown"];a.pb.L7={altKey:!0,bubbles:!0,cancelable:!0,ctrlKey:!0,currentTarget:!0,eventPhase:!0,metaKey:!0,relatedTarget:!0,shiftKey:!0,target:!0,timeStamp:!0,view:!0,which:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pageX:!0,pageY:!0,screenX:!0,screenY:!0,toElement:!0,"char":!0,
charCode:!0,key:!0,keyCode:!0};a.pb.E9=100;a.J={};a.J.Hy=function(b){if(!b)return a.J.Po();for(;b&&0<b.length&&b.attr("oj.ZOrderUtils._SURROGATE_ATTR")!==a.J.bG;){if(a.J.gK(b[0]))return b;b=b.parent()}return a.J.Po()};a.J.Po=function(){var b=f(document.getElementById(a.J.bG));if(0<b.length)return b;b=f("\x3cdiv\x3e");b.attr("role","presentation");b.attr("id",a.J.bG);b.prependTo(f(document.body));return b};a.J.kna=function(b,d,c,e,g,h){var k=b[0];if(a.J.gK(k.parentNode))throw Error("JET Popup is already open - id: "+
k.getAttribute("id"));d=a.J.Hy(h===a.N.en.KF?null:d);h=f("\x3cdiv\x3e");var l=b.attr("id");a.Ea.Ni(l)?h.uniqueId():h.attr("id",[l,"layer"].join("_"));h.attr("role","presentation");h.addClass(g);b.after(h);g=a.J.bI(h);a.Components.Lg(k);b.appendTo(h);h.appendTo(d);a.Components.gf(k);a.J.T1(h,e);a.J.S1(h,c,g)};a.J.S1=function(b,d,c){if(!c){var e=b.attr(a.J.Pv);e&&(c=f(document.getElementById(e)))}b.data(a.J.Pz,d);c&&d&&f.isFunction(d[a.N.Bc.ds])&&(c.surrogate(),c.surrogate("option","beforeDestroy",
d[a.N.Bc.ds]))};a.J.LN=function(b){return b.data(a.J.Pz)};a.J.bI=function(b){var d=f("\x3cscript\x3e"),c=b.attr("id");a.Ea.Ni(c)?d.uniqueId():d.attr("id",[c,"surrogate"].join("_"));d.insertBefore(b);c=d.attr("id");b.attr(a.J.Pv,c);return d};a.J.uka=function(b){var d=b.attr(a.J.Pv);b.removeAttr(a.J.Pv);d=f(document.getElementById(d));b.insertAfter(d);d.surrogate("option","beforeDestroy",null);d.remove()};a.J.qqa=function(b){var d=a.J.Hy(b);a.J.TO(d,a.J.gba);a.J.vL(d);d.removeData(a.J.Pz);d.removeData(a.J.lG);
var c=b[0];a.Components.Lg(c);a.J.uka(d);a.v.unwrap(b,d);a.Components.gf(c)};a.J.gba=function(b,d){if(0<d.level)return a.J.Sg.Cz;var c=b.data(a.J.Pz);if(c&&f.isFunction(c[a.N.Bc.bs]))c[a.N.Bc.bs]();return a.J.Sg.op};a.J.T1=function(b,d){var c=b.data(a.J.lG);b.data(a.J.lG,d);a.Ea.Ni(c)?a.N.bi.BF===d?a.J.bT(b):a.J.vL(b):c!==d&&(d!==c&&d===a.N.bi.BF?a.J.bT(b):a.J.vL(b))};a.J.tpa=function(){for(var b=a.J.Po().children(),d=b.length-1;-1<d;d--)if(f(b[d]).hasClass(a.J.bS))return!0;return!1};a.J.bT=function(b){var d=
f("\x3cdiv\x3e");d.addClass(a.J.bS);d.addClass(b[0].className);d.attr("role","presentation");var c=b.attr("id");a.Ea.Ni(c)?d.uniqueId():d.attr("id",[c,"overlay"].join("_"));b.before(d);d=d.attr("id");b.attr(a.J.rG,d)};a.J.vL=function(b){var d=b.attr(a.J.rG);a.Ea.Ni(d)||(b.removeAttr(a.J.rG),f(document.getElementById(d)).remove())};a.J.Sg={op:0,Cz:1,hF:2};a.J.uA={mQ:0,lQ:1};a.J.SO=function(b,d,c){c||(c={});c.level=0;c.type=a.J.uA.lQ;a.J.VM(b,d,c)};a.J.TO=function(b,d,c){c||(c={});c.level=0;c.type=
a.J.uA.mQ;a.J.VM(b,d,c)};a.J.VM=function(b,d,c){var e=c.level;b=b.children();for(var g=b.length-1;-1<g;g--){var h=f(b[g]);if(a.J.gK(h[0])){var k;if(c.type===a.J.uA.mQ){k=d(h,c);if(k===a.J.Sg.hF)return k;if(k===a.J.Sg.Cz)break}c.level=e+1;k=a.J.VM(h,d,c);c.level=e;if(k===a.J.Sg.hF)return k;if(c.type===a.J.uA.lQ){k=d(h,c);if(k===a.J.Sg.hF)return k;if(k===a.J.Sg.Cz)break}}}return a.J.Sg.op};a.J.gK=function(b){return 1===b.nodeType&&b.hasAttribute(a.J.Pv)?!0:!1};a.J.U3=function(){return 0<a.J.Po().children().length};
a.J.SN=function(){var b={popupCount:0},d=a.J.Po();a.J.TO(d,a.J.Qia,b);return b.popupCount};a.J.Qia=function(b,d){d.popupCount+=1;return a.J.Sg.op};a.J.vN=function(){var b={},d=[];b.popups=d;d=a.J.Po();a.J.TO(d,a.J.Ria,b);d=b.popups;return f(d)};a.J.Ria=function(b,d){d.popups.push(b[0]);return a.J.Sg.op};a.J.lN=function(b,d){function c(b,c){for(var d=["absolute","relative","fixed"],e=b.parents(),g=[],h=e.length-1;-1<h;h--)g.push(f(e[h]));e=g;e.push(b);for(var g=[],k=0,h=0;h<e.length;h++){var l=e[h],
m=l.css("position"),n=a.v.Eoa(l.css("opacity")),C=a.v.wm(l.css("z-index")),l=f.inArray(l[0],l.parent().children());-1<f.inArray(m,d)?g.push({weight:[k++,C,l],order:[l]}):1>n?g.push({weight:[k++,1,l],order:[l]}):c&&g.push({weight:[0,0,l],order:[l]})}return g}function e(a,b){for(var c=Math.max(a.length,b.length),d=0;d<c;d++){var e=d<a.length?a[d]:-1,f=d<b.length?b[d]:-1;if(e!==f)return e<f?-1:1}return 0}a.l.$c(b,jQuery);a.l.$c(d,jQuery);for(var g=c(b,!1),h=c(d,!1),k=Math.max(g.length,h.length),l=0;l<
k;l++){var m=l<g.length?g[l].weight:[-1],n=l<h.length?h[l].weight:[-1],m=e(m,n);if(0!==m)return m}g=c(b,!0);h=c(d,!0);k=Math.max(g.length,h.length);for(l=0;l<k;l++)if(m=l<g.length?g[l].order:[-1],n=l<h.length?h[l].order:[-1],m=e(m,n),0!==m)return m;return 0};a.J.roa=function(a){a.stopPropagation();a.preventDefault()};a.J.Pz="oj-popup-events";a.J.lG="oj-popup-modality";a.J.bG="__oj_zorder_container";a.J.Pv="data-oj-surrogate-id";a.J.rG="data-oj-overlayid";a.J.bS="oj-component-overlay";f.widget("oj.surrogate",
{options:{create:null,beforeDestroy:null},_create:function(){this._super();this.element.uniqueId()},_destroy:function(){this._trigger("beforeDestroy");this.element.removeUniqueId();this._super()}});a.zh=function(a){this.l1=a;this.Init()};a.b.ga(a.zh,a.b,"oj.SimpleTapRecognizer");a.zh.prototype.Init=function(){a.zh.r.Init.call(this);for(var b=this.wV=f.proxy(this.pB,this),d=document.documentElement,c=0;c<a.zh.rA.length;c++)d.addEventListener(a.zh.rA[c],b,!0)};a.zh.prototype.pB=function(b){var d=this.l1,
c=b.type;"touchstart"===c?(this.$q=b,this.$q.nma=(new Date).getTime()):"touchmove"===c||"touchcancel"===c?delete this.$q:"touchend"===c&&(this.$q&&(b=this.$q.nma,isNaN(b)?d(this.$q):(new Date).getTime()-b<a.zh.B9&&d(this.$q)),delete this.$q)};a.zh.prototype.destroy=function(){delete this.l1;var b=this.wV;delete this.wV;for(var d=document.documentElement,c=0;c<a.zh.rA.length;c++)d.removeEventListener(a.zh.rA[c],b,!0)};a.zh.rA=["touchstart","touchmove","touchcancel","touchend"];a.zh.B9=700;a.De=function(){this.Init()};
a.b.ga(a.De,a.b,"oj.PopupLiveRegion");a.De.prototype.Init=function(){a.De.r.Init.call(this);isNaN(a.De.Nx)?a.De.Nx=1:++a.De.Nx};a.De.prototype.destroy=function(){if(!isNaN(a.De.Nx)&&(--a.De.Nx,1>a.De.Nx)){var b=f(document.getElementById(a.De.zG));0<b.length&&b.remove()}};a.De.prototype.ona=function(b){if(!a.Ea.ph(b)){var d=a.De.tea();d.children().remove();f("\x3cdiv\x3e").text(b).appendTo(d)}};a.De.tea=function(){var b=f(document.getElementById(a.De.zG));0===b.length&&(b=f("\x3cdiv\x3e"),b.attr({id:a.De.zG,
role:"log","aria-live":"polite","aria-relevant":"additions"}),b.addClass("oj-helper-hidden-accessible"),b.appendTo(document.body));return b};a.De.zG="__oj_popup_arialiveregion";a.ei=function(b,d,c,e){a.l.$c(b,jQuery);a.l.om(d);a.l.Ho(c);a.l.bN(e);this.jD=b;this.Tt=d;this.DH=c;this.vj=e?e:"";this.Init()};a.b.ga(a.ei,a.b,"oj.PopupSkipLink");a.ei.prototype.Init=function(){a.ei.r.Init.call(this);var b=this.jD,d=this.DH,c=this.Tt;delete this.Tt;var e=this.vj;delete this.vj;var g=f("\x3ca\x3e").attr({tabindex:"-1",
href:"#"});a.Ea.ph(e)||g.attr("id",e);g.addClass("oj-helper-hidden-accessible");g.text(c);g.insertAfter(b);g.on("click",d);b.data(a.ei.oA,g)};a.ei.prototype.destroy=function(){var b=this.jD;delete this.jD;var d=this.DH;delete this.DH;if(b){var c=b.data(a.ei.oA);b.removeData(a.ei.oA);c&&(c.off("click",d),c.remove())}};a.ei.prototype.getLink=function(){var b=this.jD,d;b&&(d=b.data(a.ei.oA));return d};a.ei.oA="oj-skiplink";a.oc={};a.oc.Hg=function(b,d){for(var c=f.extend({},b),e=0;e<a.oc.KQ.length;e++){var g=
a.oc.KQ[e],h=c[g];h&&(c[g]=h.replace("start",d?"right":"left").replace("end",d?"left":"right").replace("\x3c",d?"+":"-").replace("\x3e",d?"-":"+"))}return c};a.oc.aqa=function(a,d,c){return"event"===a?c:null==a||"launcher"===a?d:a};a.oc.Nia=function(a){f.each(["pageX","pageY"],function(d,c){if(a&&void 0===a[c]&&a.originalEvent){var e=a.originalEvent,f=e.type;(f="touchstart"===f||"touchmove"===f?"touches":"touchend"===f?"changedTouches":null)&&(e=e[f][0])&&(a[c]=e[c])}})};a.oc.KQ=["my","at"];a.oc.fO=
function(b){return b.target&&0<b.target.height&&0<b.target.width?!a.v.Kpa(b.target.element):!1};f.ui.position.flipcenter={left:function(b,d){var c=b.left;f.ui.position.flip.left.call(this,b,d);var e=d.within,g=e.isWindow?e.scrollLeft:e.offset.left,h=b.left-d.collisionPosition.marginLeft,e=h+d.collisionWidth-e.width-g;if(0<g-h||0<e)"right"===d.at[0]?c-=d.targetWidth/2:"left"===d.at[0]&&(c+=d.targetWidth/2),g="rtl"===a.v.zm()?-1:1,c-=d.elemWidth/2*g,b.left=c},top:function(a,d){var c=a.top;f.ui.position.flip.top.call(this,
a,d);var e=d.within,e=e.isWindow?e.scrollTop:e.offset.top,g=a.top-d.collisionPosition.marginTop,h=g+d.collisionHeight-d.within.height-e;if(0<e-g||0<h)"top"===d.at[1]?c+=d.targetHeight/2:"bottom"===d.at[1]&&(c-=d.targetHeight/2),c+=d.elemHeight/2,a.top=c}};f.ui.position.flip={left:function(a,d){var c=d.within,e=c.offset.left+c.scrollLeft,f=c.width,c=c.isWindow?c.scrollLeft:c.offset.left,h=a.left-d.collisionPosition.marginLeft,k=h-c,h=h+d.collisionWidth-f-c,l="left"===d.my[0]?-d.elemWidth:"right"===
d.my[0]?d.elemWidth:0,m="left"===d.at[0]?d.targetWidth:"right"===d.at[0]?-d.targetWidth:0,n=-2*d.offset[0],p,r;if(0>k&&Math.abs(p)<Math.abs(r)){if(p=a.left+l+m+n+d.collisionWidth-f-e,0>p||p<Math.abs(k))a.left+=l+m+n}else 0<h&&(r=a.left-d.collisionPosition.marginLeft+l+m+n-c,0<r||Math.abs(r)<h)&&(a.left+=l+m+n)},top:function(a,d){var c=d.within,e=c.offset.top+c.scrollTop,f=c.height,h=c.isWindow?c.scrollTop:c.offset.top,k=a.top-d.collisionPosition.marginTop,c=k-h,k=k+d.collisionHeight-f-h,l="top"===
d.my[1]?-d.elemHeight:"bottom"===d.my[1]?d.elemHeight:0,m="top"===d.at[1]?d.targetHeight:"bottom"===d.at[1]?-d.targetHeight:0,n=-2*d.offset[1];0>c?(e=a.top+l+m+n+d.collisionHeight-f-e,(0>e||e<Math.abs(c))&&0>k&&c<k&&(a.top+=l+m+n)):0<k&&(e=a.top-d.collisionPosition.marginTop+l+m+n-h,0<e||Math.abs(e)<k)&&(a.top+=l+m+n)}}});