/**
 * Copyright (c) 2014, 2016, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
"use strict";
/*
 Copyright 2013 jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
*/
define(["ojs/ojcore","jquery","ojs/ojeditablevalue","jqueryui-amd/draggable","ojs/ojtouchproxy"],function(a,f){(function(){a.ya("oj.ojSlider",f.oj.editableValue,{defaultElement:"\x3cinput\x3e",version:"1.0.1",widgetEventPrefix:"oj",options:{distance:0,max:100,min:0,orientation:"horizontal",readOnly:!1,disabled:!1,step:1,type:"fromMin",value:0,rawValue:void 0},uZ:5,S0:null,ie:function(){return"rtl"===a.v.zm()},_ComponentCreate:function(){this._super();this.element.removeAttr("pattern");this.mY=!1;
this.element.is("INPUT")?(this.mY=!0,this.element[0].style&&(this.gma=this.element[0].style.cssText),this.kY=this.element.css("display"),this.element.css("display","none"),this.vi=f(this.element).wrap("\x3cdiv\x3e \x3c/div\x3e").parent()):this.vi=this.element;this.pU()},pU:function(){this.rZ=[];this.rg=null;var a="oj-slider ",a=this.jc()?a+"oj-slider-vertical":a+"oj-slider-horizontal",a=a+" oj-component oj-form-control";this.options.ME&&(a+=" oj-read-only");this.options.disabled&&(a+=" oj-disabled");
this.vi.removeClass();this.vi.addClass(a);this.Hf="range"===this.options.type?!0:!1;this.MT();this.dca();this.zba();this.Daa();this.aca();this.gca();this.ny();this.Fj()},rf:function(){this._super();this.Rt();var a=this.r8();if(a){var d=this.vi.find(".oj-slider-thumb"),c=a.attr("id");c||(c=a.attr("for"));d.attr("aria-labelledby",c);1<a.length&&1<d.length&&d[1].attr("aria-labelledby",String(c))}else if(a=this.element.attr("aria-label"))d=this.vi.find(".oj-slider-thumb"),d.attr("aria-label",a)},r8:function(){var a=
this.Dda();if(null!==a&&0!==a.length)return a;a=this.Cda();if(null!==a&&0!==a.length)return a},Cda:function(){var a=this.element.prop("id");if(void 0!==a){var d=f("label[for\x3d'"+a+"']");if(0<d.length)return d;a="span[for\x3d'"+a+"']";if(0!==f(a).length)return f(a)}return null},Dda:function(){var a=this.element.attr("aria-labelledby");if(void 0!==a){var d=f("label[id\x3d'"+a+"']");if(0<d.length)return d;a=f("span[id\x3d'"+a+"']");if(0<a.length)return a}else return null},widget:function(){return this.vi},
qi:function(a){this.S0=a},kg:function(){return this.S0},KB:function(){return this.element[0].id},DJ:function(a){return this.KB()+"-thumb"+a},WV:function(){return this.KB()+"-barValue"},Fda:function(){return this.KB()+"-barBack"},Wea:function(){return this.KB()+"-sliderWrapper"},gca:function(){var a,d,c="",e="class\x3d'oj-slider-thumb ui-state-default' tabindex\x3d'0' role\x3d'slider'"+("aria-valuemin \x3d '"+this.Zc()+"' ")+("aria-valuemax \x3d '"+this.df()+"' ")+"\x3e\x3c/span\x3e",g=[];d=this.Hf?
this.options.value.length:1;for(a=0;a<d;a++)c="\x3cspan "+("id\x3d'"+this.DJ(a)+"' ")+e,g.push(c);this.sg=f(g.join("")).appendTo(this.Fi);this.Ao=this.sg.eq(0);var h=this;this.sg.each(function(a){f(this).data("oj-slider-thumb-index",a);h.jc()&&f(this).attr("aria-orientation","vertical");h.options.disabled?(f(this).attr("aria-disabled","true"),f(this).removeAttr("tabindex")):f(this).removeAttr("aria-disabled");h.options.readOnly?f(this).attr("title","read only"):f(this).removeAttr("title")})},dca:function(){var a=
this.Wea(),d=this.vi.find("#"+a);d.length&&d.remove();this.Fi=f("\x3cdiv\x3e\x3c/div\x3e");f(this.Fi).attr("id",a);this.Fi.addClass("oj-slider-container");this.element.after(this.Fi);this.Fi[0].style.cssText=this.gma;this.jc()&&""==this.Fi[0].style.height&&(this.Fi[0].style.height="150px")},zba:function(){var a=this.Fda(),d=this.vi.find("#"+a);d.length&&d.remove();this.Uc=f("\x3cdiv\x3e\x3c/div\x3e");d="oj-slider-bar";d=this.jc()?d+" oj-slider-vertical":d+" oj-slider-horizontal";f(this.Uc).attr("id",
a);this.Uc.addClass(d);this.Fi.append(this.Uc);var c=this;this.Uc.on("mousedown"+c.eventNamespace,function(a){c.J_(a);c.sx(a);c.CB().focus()})},Daa:function(){this.options.type&&(this.options.value?this.Hf&&2!=this.options.value.length&&(this.options.value=[0<this.options.value.length?this.options.value[0]:this.Zc(),this.df()],this.option("value",this.options.value,{_context:{Hc:!0,Wa:!0}})):(this.options.value=this.Hf?[this.Zc(),this.df()]:this.Zc(),this.option("value",this.options.value,{_context:{Hc:!0,
Wa:!0}})))},aca:function(){var a=this.options,d="";if(a.type){this.Gb=f("\x3cdiv\x3e\x3c/div\x3e");f(this.Gb).attr("id",this.WV());this.Fi.append(this.Gb);var d="oj-slider-range oj-slider-bar-value",c=this;this.Gb.on("mousedown"+c.eventNamespace,function(a){c.J_(a);c.sx(a);c.CB().focus()});this.Gb=this.Fi.find("#"+this.WV());var e="";"fromMin"===a.type?e=" oj-slider-range-min":"fromMax"===a.type&&(e=" oj-slider-range-max");this.Gb.addClass(d+e)}else this.Gb&&this.Gb.remove(),this.Gb=null},Sla:function(b){this.oM=
a.He.P1(b)},pma:function(b){a.He.p5(b)},Fj:function(){this.Ev()&&this._hoverable(this.vi);this._focusable(this.vi);this.sg.toArray().forEach(function(a){a=f(a);this.Qp(a);this._on(a,this.uma);this.Sla(a)},this)},$d:function(){return this.vi},cV:function(){this.sg.toArray().forEach(function(a){a=f(a);this.pma(a)},this);this.Gb&&this.Gb.remove();this.Fi&&this.Fi.remove()},Nma:function(){a.v.unwrap(this.element,this.vi);this.element.css("display",this.kY);this.Gs(this.element)},_destroy:function(){this.cV();
this.Nma();return this._super()},J_:function(a){var d,c,e,g=this,h=this.options;e=0;this.mU=this.Ao;if(h.disabled||h.readOnly)return!1;d=this.Cea({x:a.pageX,y:a.pageY});c=this.df()-this.Zc()+1;this.Hf&&this.sg.each(function(a){var b=Math.abs(d-g.pq(a));if(c>b||c===b&&(a===g.Uha||g.pq(a)===h.min))c=b,this.mU=f(this),e=a});this.rg=e;if(this.mU)return this.sg.hasClass("ui-state-hover")||this.Vq(a,e,d),this.CB().addClass("oj-active").focus(),this.Gb.addClass("oj-active"),!0},Wga:function(a,d){var c=this.options;
if(c.disabled||c.readOnly)return!1;d.addClass("oj-active").focus();this.Gb.addClass("oj-active");return!0},zia:function(a,d){var c=this.LW(d);this.Vq(a,this.rg,c,!0);c=100*this.pW(d);this.Hf?this.z0(c,this.rg):this.w0(c);return!1},sx:function(a,d){this.sg.removeClass("oj-active");this.Gb.removeClass("oj-active");var c=this.LW(d);this.Vq(a,this.rg,c);this.Eh(a,this.rg,!1);this.rg=null;return!1},jc:function(){return"vertical"===this.options.orientation},MW:function(a){1<a&&(a=1);0>a&&(a=0);this.jc()&&
(a=1-a);return a},Cea:function(a){var d=this.eea(a);a=this.df()-this.Zc();this.ie()&&!this.jc()&&(d=1-d);return this.Oh(this.Zc()+d*a)},eea:function(a){var d;this.jc()?(d=this.Uc.height(),a=a.y-this.Uc.offset().top):(d=this.Uc.width(),a=a.x-this.Uc.offset().left);return 0==d?1:d=this.MW(a/d)},CB:function(){return this.Hf?f(this.sg[this.rg]):this.Ao},pW:function(a){var d;a||(a=this.CB());this.jc()?(d=a.outerHeight()/2,d=a.offset().top+d,a=this.Uc.height(),d-=this.Uc.offset().top):(d=a.outerWidth()/
2,d=a.offset().left+d,a=this.Uc.width(),d-=this.Uc.offset().left);return 0==a?1:a=this.MW(d/a)},LW:function(a){var d;a=this.pW(a);d=this.df()-this.Zc();this.ie()&&!this.jc()&&(a=1-a);return this.Oh(this.Zc()+a*d)},Eea:function(a){return this.pq(a?0:1)},yea:function(a,d,c){return 2===this.options.value.length&&(0===a&&d>c||1===a&&d<c)?c:d},Vq:function(a,d,c,e){var f;this.Hf?(f=this.Eea(d),c=this.yea(d,c,f),c!==this.pq(d)&&this.Ala(a,d,c,e)):c!==this.bX()&&(this.Hla(a,c,e),e||this.mY&&this.element.val(c))},
Hla:function(a,d,c){this.IC=this.Oh(d);c||(this.gc(this.IC,a),this.ny());this.Dn(this.IC,a)},Eh:function(a,d,c){this.Hf?(this.VY=this.zea(d,this.rZ[d]),this.Dn(this.VY,a),c||this.gc(this.VY,a)):(this.Dn(this.IC,a),c||this.gc(this.IC,a));this.Uha=d},zea:function(a,d){var c,e;c=this.options.value.slice();for(e=0;e<c.length;e+=1)c[e]=this.Oh(c[e]);a===this.rg&&(c[a]=d);return c},bX:function(){return this.qX()},pq:function(a){return this.cfa(a)},Ala:function(a,d,c,e){this.rZ[d]=this.Oh(c);this.Eh(a,d,
e);e||this.ny()},_setOption:function(a,d,c){"value"===a&&(Array.isArray(d)?isNaN(d[0])?(this.Hf=!1,this.Gk(a,d[0])):this.Hf=!0:(this.Hf=!1,this.Gk(a,d)));d="max"===a||"min"===a?this.Gk(a,d):"step"===a?this.Ax(d):d;"disabled"!=a&&this._super(a,d,c);"readOnly"===a&&(this.options.ME=d);"disabled"===a&&(this.options.disabled=d);switch(a){case "value":this.ny();this.Rt();break;case "min":case "max":this.MT();this.ny();this.Rt();break;case "orientation":case "readonly":case "step":case "type":case "disabled":this.Eja()}},
Eja:function(){this.cV();this.pU();this.rf()},qX:function(){var a=this.options.value;return a=this.Oh(a)},cfa:function(a){return this.Oh(this.options.value[a])},Oh:function(a){if(a<=this.Zc())return this.Zc();if(a>=this.df())return this.df();var d=0<this.options.step?this.options.step:1,c=(a-this.Zc())%d;a-=c;2*Math.abs(c)>=d&&(a+=0<c?d:-d);return parseFloat(a.toFixed(5))},MT:function(){var a=this.Zc();this.max=0!==(this.options.max-a)/this.options.step%1?this.options.max-(this.options.max-a)%this.options.step:
this.options.max},Zc:function(){return this.options.min},df:function(){return this.max},qW:function(){var a;a=0<this.options.step?(this.df()-this.Zc())/this.options.step:100;a=(this.jc()?this.Uc.height():this.Uc.width())/a;1>a&&(a=1);return this.jc()?[1,a]:[a,1]},EJ:function(a){return(this.pq(a)-this.Zc())/(this.df()-this.Zc())},ny:function(){var a,d,c,e;this.Hf?this.sg.toArray().forEach(function(c,d){var e=f(c);a=100*this.EJ(d);this.ie()&&!this.jc()&&(a=100-a);this.jc()?f(e).css({top:100-a+"%"}):
f(e).css({left:a+"%"});f(e).attr("aria-valuenow",this.pq(d));this.z0(a,d)},this):(d=this.qX(),c=this.Zc(),e=this.df(),a=e!==c?(d-c)/(e-c)*100:0,this.ie()&&!this.jc()&&(a=100-a),this.jc()?this.Ao.css({top:100-a+"%"}):this.Ao.css({left:a+"%"}),f(this.Ao).attr("aria-valuenow",d),this.w0(a))},w0:function(a){var d=this.options.type;this.jc()?("fromMin"===d&&this.Gb.css({height:a+"%"}),"fromMax"===d&&this.Gb.css({height:100-a+"%"})):this.ie()?("fromMin"===d&&this.Gb.css({width:100-a+"%"}),"fromMax"===d&&
this.Gb.css({width:a+"%"})):("fromMin"===d&&this.Gb.css({width:a+"%"}),"fromMax"===d&&this.Gb.css({width:100-a+"%"}))},z0:function(a,d){var c=this.Gb.attr("id");if(0==d)switch(c=100*this.EJ(1),this.options.type){case "fromMin":this.jc()?this.Gb.css({height:a+"%"}):this.Gb.css({width:a+"%"});break;case "range":this.jc()?(this.Gb.css({top:100-c+"%"}),this.Gb.css({height:c-a+"%"})):this.ie()?(this.Gb.css({left:100-c+"%"}),this.Gb.css({width:c-(100-a)+"%"})):(this.Gb.css({left:a+"%"}),this.Gb.css({width:c-
a+"%"}))}else{var e=100*this.EJ(0);switch(this.options.type){case "fromMax":this.jc()?this.Gb.css({height:100-a+"%"}):this.Gb.css({width:100-a+"%"});break;case "range":this.jc()?document.getElementById(c)&&(this.Gb.css({top:100-a+"%"}),this.Gb.css({height:a-e+"%"})):this.ie()?document.getElementById(c)&&(this.Gb.css({left:a+"%"}),this.Gb.css({width:-a+100-e+"%"})):document.getElementById(c)&&this.Gb.css({width:a-parseInt(document.getElementById(c).style.left,10)+"%"})}}},uma:{keydown:function(a){var d,
c,e,g=f(a.target).data("oj-slider-thumb-index");this.rg=g;switch(a.keyCode){case f.ui.keyCode.HOME:case f.ui.keyCode.END:case f.ui.keyCode.PAGE_UP:case f.ui.keyCode.PAGE_DOWN:case f.ui.keyCode.UP:case f.ui.keyCode.RIGHT:case f.ui.keyCode.DOWN:case f.ui.keyCode.LEFT:a.preventDefault(),f(a.target).addClass("oj-active")}e=this.options.step;d=this.Hf?c=this.pq(g):c=this.bX();switch(a.keyCode){case f.ui.keyCode.HOME:c=this.Zc();break;case f.ui.keyCode.END:c=this.df();break;case f.ui.keyCode.PAGE_UP:c=
this.Oh(d+(this.df()-this.Zc())/this.uZ);break;case f.ui.keyCode.PAGE_DOWN:c=this.Oh(d-(this.df()-this.Zc())/this.uZ);break;case f.ui.keyCode.UP:if(d===this.df())return;c=this.Oh(d+e);break;case f.ui.keyCode.RIGHT:if(!this.ie()||this.jc()){if(d===this.df())return;d+=e}else{if(d===this.Zc())return;d-=e}c=this.Oh(d);break;case f.ui.keyCode.DOWN:if(d===this.Zc())return;c=this.Oh(d-e);break;case f.ui.keyCode.LEFT:if(!this.ie()||this.jc()){if(d===this.Zc())return;d-=e}else{if(d===this.df())return;d+=e}c=
this.Oh(d)}this.Vq(a,g,c)},keyup:function(a){var d=f(a.target).data("oj-slider-thumb-index");this.rg=d;this.Eh(a,d,!1);f(a.target).removeClass("oj-active");this.rg=null}},ae:function(b,d){var c=this.options,e=this;this._superApply(arguments);a.ze.al([{W:"disabled",xc:!0},{W:"value"},{W:"title"},{W:"min"},{W:"max"},{W:"step"}],d,this,function(a){for(var b=["value","step","min","max"],d=0;d<b.length;d++){var f=b[d],m=f in a?a[f]:c[f];null!=m&&("step"===f?a[f]=e.Ax(m):"min"===f||"max"===f?a[f]=e.Gk(f,
m):"value"===f&&(Array.isArray(m)?a[f]=m:a[f]=e.Gk(f,m)))}});if(void 0===c.value)throw Error(this.A("noValue"));if(null!=c.min&&null!=c.max){if(c.max<c.min)throw Error(this.A("maxMin"));if(c.value<c.min||c.value>c.max)throw Error(this.A("valueRange"));}},getNodeBySubId:function(a){if(null==a)return this.element?this.element[0]:null;a=a.subId;return"oj-slider-thumb-0"===a?this.widget().find(".oj-slider-thumb")[0]:"oj-slider-thumb-1"===a?this.widget().find(".oj-slider-thumb")[1]:"oj-slider-bar"===a?
this.widget().find("."+a)[0]:"oj-slider-bar-value"===a?this.widget().find("."+a)[0]:null},getSubIdByNode:function(a){if(null!=a){if(a.id===this.DJ(0)&&f(a).hasClass("oj-slider-thumb"))return{subId:"oj-slider-thumb-0"};if(a.id===this.DJ(1)&&f(a).hasClass("oj-slider-thumb"))return{subId:"oj-slider-thumb-1"};if(f(a).hasClass("oj-slider-bar"))return{subId:"oj-slider-bar"};if(f(a).hasClass("oj-slider-bar-value"))return{subId:"oj-slider-bar-value"}}return null},_GetDefaultStyleClass:function(){return"oj-slider"},
Gk:function(a,d){var c;c=null!==d?+d:d;if(isNaN(c))throw Error(this.A("optionNum",{option:a}));return c},Ax:function(a){if(null===a)return 1;a=this.Gk("step",a);if(0>=a)throw Error(this.A("invalidStep"));if(null===a||0>=a)a=1;return a},Vra:function(){return this.Uc.offset().left+this.Uc.width()},dsa:function(){return this.Uc.offset().left},NT:function(a){var d=this.qW(),c=a[0].style,e=this;a.draggable({axis:this.jc()?"y":"x",grid:d,disabled:!1,start:function(c){a[0]==f(e.sg)[0]?e.rg=0:a[0]==f(e.sg)[1]&&
(e.rg=1);e.Wga(c,a)},drag:function(d,h){var k=h.position;e.jc()?(c.left="",k.left=""):(c.top="",k.top="");e.zia(d,a);e.jc()?(0>k.top&&(k.top=0),k.top>e.Uc.height()&&(k.top=e.Uc.height())):(0>k.left&&(k.left=0),k.left>e.Uc.width()&&(k.left=e.Uc.width()));if(e.Hf){var l;l=0==e.rg?f(e.sg[1]):f(e.sg[0]);if(e.jc()){var m=a.outerHeight()/2,n=e.Uc.offsetParent().offset().top;a.offset();l=l.offset().top+m-n}else m=a.outerWidth()/2,n=e.Uc.offsetParent().offset().left,a.offset(),l=l.offset().left+m-n;0==e.rg?
e.jc()?k.top<l&&(k.top=l):e.ie()?k.left<l&&(k.left=l):k.left>l&&(k.left=l):e.jc()?k.top>l&&(k.top=l):e.ie()?k.left>l&&(k.left=l):k.left<l&&(k.left=l)}},stop:function(c){this.style.width="";this.style.height="";e.sx(c,a)}})},Rt:function(){this.options.disabled||(this.Hf?this.sg.toArray().forEach(function(a){a=f(a);this.NT(a)},this):this.NT(this.Ao))},Rra:function(){this.Hf?this.sg.toArray().forEach(function(a){a=f(a);a.is(".ui-draggable")&&a.draggable("disable")},this):this.Ao.is(".ui-draggable")&&
this.Ao.draggable("disable")}})})()});